<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HADAERU â€” æ•æ„Ÿè‚Œã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£</title>
<link href="https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@400;600;700;800&family=Zen+Kaku+Gothic+New:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
:root {
  --cream: #faf6f0;
  --warm-white: #fffdf9;
  --blush: #f0d9cc;
  --dusty-rose: #c9a090;
  --terracotta: #b07060;
  --terracotta-dark: #8a5545;
  --sage: #8a9e8a;
  --deep-sage: #5a7a5a;
  --charcoal: #2c2c2c;
  --mid-gray: #7a7a7a;
  --light-gray: #f0ece8;
  --light-border: #e8ddd5;
  --shadow: rgba(176,112,96,0.12);
}
* { margin:0; padding:0; box-sizing:border-box; }
html { scroll-behavior:smooth; }
body {
  background:var(--cream);
  color:var(--charcoal);
  font-family:'Zen Kaku Gothic New',sans-serif;
  font-weight:300;
  line-height:1.8;
  overflow-x:hidden;
}

/* ===================== NAV ===================== */
nav {
  position:fixed; top:0; width:100%;
  padding:0.9rem 2.5rem;
  display:flex; align-items:center; gap:1.5rem;
  background:rgba(250,246,240,0.92);
  backdrop-filter:blur(16px);
  border-bottom:1px solid var(--light-border);
  z-index:500;
}
.nav-logo {
  font-family:'Shippori Mincho',serif;
  font-size:1.4rem; font-weight:800;
  color:var(--terracotta);
  text-decoration:none; white-space:nowrap;
  letter-spacing:0.15em;
}
.nav-logo small {
  display:block; font-size:0.55rem;
  font-family:'Zen Kaku Gothic New',sans-serif;
  font-weight:300; letter-spacing:0.35em;
  color:var(--mid-gray); margin-top:-3px;
}
.nav-search {
  flex:1; max-width:480px;
  position:relative;
}
.nav-search input {
  width:100%; padding:0.55rem 1rem 0.55rem 2.8rem;
  border:1.5px solid var(--light-border);
  border-radius:50px; background:white;
  font-family:'Zen Kaku Gothic New',sans-serif;
  font-size:0.85rem; color:var(--charcoal);
  outline:none; transition:border-color 0.3s, box-shadow 0.3s;
}
.nav-search input:focus {
  border-color:var(--dusty-rose);
  box-shadow:0 0 0 3px rgba(201,160,144,0.15);
}
.nav-search input::placeholder { color:#bbb; }
.nav-search .search-icon {
  position:absolute; left:1rem; top:50%;
  transform:translateY(-50%);
  color:var(--dusty-rose); font-size:0.9rem;
}
.search-dropdown {
  display:none; position:absolute; top:calc(100% + 8px);
  left:0; right:0; background:white;
  border:1px solid var(--light-border);
  border-radius:12px; box-shadow:0 8px 30px var(--shadow);
  overflow:hidden; z-index:600;
}
.search-dropdown.show { display:block; }
.search-result-item {
  padding:0.7rem 1.2rem; font-size:0.85rem;
  cursor:pointer; display:flex; align-items:center; gap:0.8rem;
  transition:background 0.2s;
  border-bottom:1px solid var(--light-border);
}
.search-result-item:last-child { border-bottom:none; }
.search-result-item:hover { background:var(--light-gray); }
.search-result-item .result-type {
  font-size:0.7rem; padding:0.15rem 0.5rem;
  border-radius:20px; font-weight:500;
}
.type-product { background:#fde8e0; color:var(--terracotta); }
.type-brand { background:#e0f0e0; color:var(--deep-sage); }
.type-article { background:#e8e0f0; color:#7060b0; }
nav ul {
  list-style:none; display:flex; gap:0.3rem;
  margin-left:auto; align-items:center;
}
nav ul li a {
  text-decoration:none; color:var(--charcoal);
  font-size:0.8rem; letter-spacing:0.1em;
  padding:0.4rem 0.8rem; border-radius:20px;
  transition:all 0.2s; font-weight:400;
  white-space:nowrap;
}
nav ul li a:hover { background:var(--blush); color:var(--terracotta); }
.btn-nav-login {
  background:white !important;
  border:1.5px solid var(--dusty-rose) !important;
  color:var(--terracotta) !important;
}
.btn-nav-register {
  background:var(--terracotta) !important;
  color:white !important;
}
.btn-nav-register:hover {
  background:var(--terracotta-dark) !important;
}

/* ===================== MODALS ===================== */
.modal-overlay {
  display:none; position:fixed; inset:0;
  background:rgba(44,44,44,0.5);
  backdrop-filter:blur(4px);
  z-index:1000; align-items:center; justify-content:center;
}
.modal-overlay.show { display:flex; }
.modal {
  background:white; border-radius:24px;
  padding:2.5rem; width:90%; max-width:460px;
  position:relative; animation:slideUp 0.3s ease;
  max-height:90vh; overflow-y:auto;
}
@keyframes slideUp {
  from { opacity:0; transform:translateY(20px); }
  to { opacity:1; transform:translateY(0); }
}
.modal-close {
  position:absolute; top:1.2rem; right:1.5rem;
  background:none; border:none; font-size:1.4rem;
  cursor:pointer; color:var(--mid-gray);
  transition:color 0.2s;
}
.modal-close:hover { color:var(--charcoal); }
.modal h2 {
  font-family:'Shippori Mincho',serif;
  font-size:1.6rem; font-weight:700;
  margin-bottom:0.3rem; color:var(--charcoal);
}
.modal .subtitle {
  font-size:0.85rem; color:var(--mid-gray);
  margin-bottom:2rem;
}
.form-group { margin-bottom:1.3rem; }
.form-group label {
  display:block; font-size:0.8rem;
  font-weight:500; color:var(--charcoal);
  margin-bottom:0.4rem; letter-spacing:0.05em;
}
.form-group input,
.form-group select,
.form-group textarea {
  width:100%; padding:0.7rem 1rem;
  border:1.5px solid var(--light-border);
  border-radius:10px; font-family:'Zen Kaku Gothic New',sans-serif;
  font-size:0.88rem; color:var(--charcoal);
  outline:none; transition:border-color 0.3s;
  background:var(--cream);
}
.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
  border-color:var(--dusty-rose);
}
.form-group textarea { resize:vertical; min-height:80px; }
.star-rating { display:flex; gap:0.3rem; margin-top:0.3rem; }
.star-rating span {
  font-size:1.8rem; cursor:pointer;
  color:#ddd; transition:color 0.2s;
}
.star-rating span.active { color:#f0a050; }
.btn-submit {
  width:100%; padding:0.85rem;
  background:var(--terracotta); color:white;
  border:none; border-radius:50px;
  font-family:'Zen Kaku Gothic New',sans-serif;
  font-size:0.9rem; font-weight:500;
  letter-spacing:0.1em; cursor:pointer;
  transition:all 0.3s; margin-top:0.5rem;
}
.btn-submit:hover {
  background:var(--terracotta-dark);
  transform:translateY(-1px);
  box-shadow:0 6px 20px rgba(176,112,96,0.3);
}
.modal-switch {
  text-align:center; margin-top:1.2rem;
  font-size:0.83rem; color:var(--mid-gray);
}
.modal-switch a {
  color:var(--terracotta); cursor:pointer;
  text-decoration:underline;
}
/* Image upload */
.image-upload-area {
  border:2px dashed var(--light-border);
  border-radius:12px; padding:1.5rem;
  text-align:center; cursor:pointer;
  transition:all 0.3s; margin-top:0.4rem;
  background:var(--cream);
}
.image-upload-area:hover {
  border-color:var(--dusty-rose);
  background:rgba(240,217,204,0.15);
}
.image-upload-area .upload-icon { font-size:2rem; margin-bottom:0.5rem; }
.image-upload-area p { font-size:0.8rem; color:var(--mid-gray); }
.image-preview {
  display:flex; gap:0.5rem; flex-wrap:wrap; margin-top:0.8rem;
}
.image-preview img {
  width:70px; height:70px; object-fit:cover;
  border-radius:8px; border:1px solid var(--light-border);
}

/* ===================== HERO ===================== */
.hero {
  min-height:100vh;
  display:grid; grid-template-columns:1fr 1fr;
  align-items:center;
  padding:8rem 4rem 4rem;
  position:relative; overflow:hidden;
}
.hero-blob {
  position:absolute; right:-5%; top:10%;
  width:52%; height:80%;
  background:radial-gradient(ellipse at center, var(--blush) 0%, transparent 65%);
  border-radius:60% 40% 70% 30% / 50% 60% 40% 50%;
  animation:morphBlob 9s ease-in-out infinite;
  z-index:0; pointer-events:none;
}
@keyframes morphBlob {
  0%,100% { border-radius:60% 40% 70% 30% / 50% 60% 40% 50%; transform:rotate(0deg) scale(1); }
  33% { border-radius:40% 60% 30% 70% / 60% 40% 70% 30%; transform:rotate(5deg) scale(1.03); }
  66% { border-radius:70% 30% 50% 50% / 30% 60% 40% 70%; transform:rotate(-3deg) scale(0.97); }
}
.hero-text { position:relative; z-index:2; animation:fadeUp 0.9s ease both; }
@keyframes fadeUp {
  from { opacity:0; transform:translateY(28px); }
  to { opacity:1; transform:translateY(0); }
}
.hero-tag {
  display:inline-block; font-size:0.7rem;
  letter-spacing:0.4em; color:var(--sage);
  text-transform:uppercase; margin-bottom:1.2rem;
  padding:0.35rem 1rem; border:1px solid var(--sage);
  border-radius:20px;
}
.hero h1 {
  font-family:'Shippori Mincho',serif;
  font-size:clamp(2.5rem,4.5vw,4rem);
  font-weight:800; line-height:1.3;
  color:var(--charcoal); margin-bottom:1.3rem;
}
.hero h1 em { font-style:normal; color:var(--terracotta); }
.hero p {
  font-size:0.95rem; color:var(--mid-gray);
  max-width:460px; margin-bottom:2rem; line-height:2.1;
}
.hero-btns { display:flex; gap:1rem; flex-wrap:wrap; }
.btn-primary {
  display:inline-block; background:var(--terracotta); color:white;
  padding:0.85rem 2rem; border-radius:50px;
  text-decoration:none; font-size:0.85rem;
  letter-spacing:0.12em; font-weight:500;
  transition:all 0.3s; cursor:pointer; border:none;
  box-shadow:0 4px 20px rgba(176,112,96,0.3);
}
.btn-primary:hover {
  background:var(--terracotta-dark);
  transform:translateY(-2px);
  box-shadow:0 8px 28px rgba(176,112,96,0.35);
}
.btn-outline {
  display:inline-block;
  border:1.5px solid var(--terracotta); color:var(--terracotta);
  padding:0.85rem 2rem; border-radius:50px;
  text-decoration:none; font-size:0.85rem;
  letter-spacing:0.12em; font-weight:500;
  transition:all 0.3s; cursor:pointer; background:transparent;
}
.btn-outline:hover { background:var(--terracotta); color:white; }
.hero-visual {
  position:relative; z-index:2; display:flex;
  justify-content:center; align-items:center;
  animation:fadeUp 0.9s 0.25s ease both;
}
.hero-stats {
  display:grid; grid-template-columns:1fr 1fr;
  gap:1.2rem; max-width:380px;
}
.stat-card {
  background:white; border-radius:18px;
  padding:1.5rem; text-align:center;
  border:1px solid var(--light-border);
  box-shadow:0 4px 20px var(--shadow);
  transition:transform 0.3s;
}
.stat-card:hover { transform:translateY(-4px); }
.stat-card .num {
  font-family:'Shippori Mincho',serif;
  font-size:2rem; font-weight:800;
  color:var(--terracotta); display:block;
}
.stat-card .label { font-size:0.75rem; color:var(--mid-gray); }
.stat-card:first-child {
  grid-column:1/-1; display:flex; align-items:center;
  gap:1rem; text-align:left;
}
.stat-card:first-child .num { font-size:2.5rem; }

/* ===================== SECTIONS COMMON ===================== */
.section-wrap { padding:5rem 4rem; }
.section-label {
  font-size:0.68rem; letter-spacing:0.5em;
  text-transform:uppercase; color:var(--dusty-rose);
  margin-bottom:0.6rem; font-weight:400;
}
.section-title {
  font-family:'Shippori Mincho',serif;
  font-size:clamp(1.6rem,2.8vw,2.4rem);
  font-weight:700; line-height:1.4;
  color:var(--charcoal); margin-bottom:0.8rem;
}
.section-header {
  display:flex; justify-content:space-between;
  align-items:flex-end; margin-bottom:2.5rem; flex-wrap:wrap; gap:1rem;
}
.see-all {
  font-size:0.8rem; color:var(--terracotta);
  text-decoration:none; letter-spacing:0.1em;
  display:flex; align-items:center; gap:0.3rem;
  transition:gap 0.2s;
}
.see-all:hover { gap:0.6rem; }

/* ===================== LATEST REVIEWS ===================== */
.reviews-section { background:var(--warm-white); border-top:1px solid var(--light-border); }
.reviews-grid {
  display:grid; grid-template-columns:repeat(3,1fr); gap:1.5rem;
}
.review-card {
  background:white; border-radius:18px;
  overflow:hidden; border:1px solid var(--light-border);
  transition:all 0.35s; cursor:pointer;
}
.review-card:hover {
  transform:translateY(-5px);
  box-shadow:0 16px 50px var(--shadow);
}
.review-card-img {
  width:100%; height:160px; object-fit:cover;
  background:linear-gradient(135deg, var(--blush), var(--light-gray));
  display:flex; align-items:center; justify-content:center;
  font-size:3rem;
}
.review-card-body { padding:1.3rem; }
.review-product-name {
  font-size:0.7rem; color:var(--dusty-rose);
  letter-spacing:0.15em; text-transform:uppercase;
  margin-bottom:0.4rem;
}
.review-card-body h3 {
  font-family:'Shippori Mincho',serif;
  font-size:1rem; font-weight:700;
  margin-bottom:0.6rem; line-height:1.5;
}
.stars { color:#f0a050; font-size:0.85rem; letter-spacing:0.05em; }
.review-text {
  font-size:0.82rem; color:var(--mid-gray);
  margin-top:0.5rem; line-height:1.9;
  display:-webkit-box; -webkit-line-clamp:3;
  -webkit-box-orient:vertical; overflow:hidden;
}
.review-footer {
  display:flex; align-items:center; gap:0.7rem;
  margin-top:1rem; padding-top:0.8rem;
  border-top:1px solid var(--light-border);
}
.avatar {
  width:28px; height:28px; border-radius:50%;
  background:linear-gradient(135deg, var(--blush), var(--dusty-rose));
  display:flex; align-items:center; justify-content:center;
  font-size:0.75rem; color:white; font-weight:600;
}
.reviewer-name { font-size:0.78rem; color:var(--mid-gray); }
.review-date { font-size:0.72rem; color:#bbb; margin-left:auto; }

/* ===================== PRODUCTS ===================== */
.products-section { border-top:1px solid var(--light-border); }
.filter-tabs {
  display:flex; gap:0.5rem; flex-wrap:wrap; margin-bottom:2rem;
}
.filter-tab {
  padding:0.4rem 1.1rem; border-radius:50px;
  border:1px solid var(--light-border);
  font-size:0.78rem; cursor:pointer;
  transition:all 0.2s; background:white;
  font-family:'Zen Kaku Gothic New',sans-serif;
}
.filter-tab.active {
  background:var(--terracotta); color:white; border-color:var(--terracotta);
}
.filter-tab:hover:not(.active) {
  border-color:var(--dusty-rose); color:var(--terracotta);
}
.products-grid {
  display:grid; grid-template-columns:repeat(4,1fr); gap:1.3rem;
}
.product-card {
  background:white; border-radius:16px;
  border:1px solid var(--light-border);
  overflow:hidden; transition:all 0.3s; cursor:pointer;
}
.product-card:hover {
  transform:translateY(-4px);
  box-shadow:0 12px 40px var(--shadow);
}
.product-img {
  height:130px;
  display:flex; align-items:center; justify-content:center;
  font-size:2.5rem;
  background:linear-gradient(135deg,var(--blush) 0%,var(--warm-white) 100%);
}
.product-body { padding:1rem; }
.product-brand {
  font-size:0.68rem; color:var(--sage);
  letter-spacing:0.2em; text-transform:uppercase;
  margin-bottom:0.3rem;
}
.product-body h4 {
  font-family:'Shippori Mincho',serif;
  font-size:0.9rem; font-weight:700;
  margin-bottom:0.4rem; line-height:1.5;
}
.product-rating {
  display:flex; align-items:center; gap:0.4rem;
}
.product-rating .stars { font-size:0.75rem; }
.product-rating .score { font-size:0.78rem; font-weight:500; color:var(--charcoal); }
.product-rating .count { font-size:0.72rem; color:#bbb; }
.product-tags { display:flex; gap:0.3rem; flex-wrap:wrap; margin-top:0.6rem; }
.product-tag {
  font-size:0.65rem; padding:0.15rem 0.5rem;
  border-radius:20px; background:var(--light-gray);
  color:var(--mid-gray);
}

/* ===================== ARTICLES ===================== */
.articles-section {
  background:var(--charcoal); color:white;
  border-top:1px solid var(--light-border);
}
.articles-section .section-label { color:var(--dusty-rose); }
.articles-section .section-title { color:white; }
.articles-section .see-all { color:var(--dusty-rose); }
.articles-grid { display:grid; grid-template-columns:2fr 1fr 1fr; gap:1.5rem; }
.article-card {
  background:rgba(255,255,255,0.05);
  border:1px solid rgba(255,255,255,0.1);
  border-radius:18px; overflow:hidden;
  transition:all 0.3s; cursor:pointer;
}
.article-card:hover {
  background:rgba(176,112,96,0.15);
  border-color:var(--dusty-rose);
  transform:translateY(-4px);
}
.article-img {
  height:120px; display:flex; align-items:center;
  justify-content:center; font-size:2.8rem;
  background:rgba(255,255,255,0.05);
}
.article-card.featured .article-img { height:180px; font-size:4rem; }
.article-body { padding:1.2rem; }
.article-tag {
  font-size:0.68rem; letter-spacing:0.2em;
  text-transform:uppercase; color:var(--dusty-rose);
  margin-bottom:0.5rem;
}
.article-card h3 {
  font-family:'Shippori Mincho',serif;
  font-size:0.95rem; font-weight:700;
  line-height:1.5; color:white;
}
.article-card.featured h3 { font-size:1.15rem; }
.article-meta {
  font-size:0.73rem; color:rgba(255,255,255,0.4);
  margin-top:0.7rem;
}

/* ===================== FAQ ===================== */
.faq-section { background:var(--warm-white); border-top:1px solid var(--light-border); }
.faq-grid { display:grid; grid-template-columns:1fr 1fr; gap:0.8rem; }
.faq-item {
  background:white; border-radius:14px;
  border:1px solid var(--light-border);
  overflow:hidden;
}
.faq-q {
  padding:1.1rem 1.3rem;
  display:flex; justify-content:space-between; align-items:center;
  cursor:pointer; transition:background 0.2s;
  gap:1rem;
}
.faq-q:hover { background:var(--light-gray); }
.faq-q-text {
  font-size:0.88rem; font-weight:500; color:var(--charcoal);
}
.faq-toggle {
  color:var(--dusty-rose); font-size:1.1rem;
  transition:transform 0.3s; flex-shrink:0;
}
.faq-item.open .faq-toggle { transform:rotate(45deg); }
.faq-a {
  display:none; padding:0 1.3rem 1.1rem;
  font-size:0.83rem; color:var(--mid-gray);
  line-height:2; border-top:1px solid var(--light-border);
  padding-top:0.8rem;
}
.faq-item.open .faq-a { display:block; }

/* ===================== POST CTA ===================== */
.post-cta {
  background:linear-gradient(135deg, var(--blush) 0%, var(--cream) 100%);
  border-top:1px solid var(--light-border);
  text-align:center;
}
.post-cta .section-title { font-size:clamp(1.8rem,3.5vw,3rem); }
.post-cta p { color:var(--mid-gray); max-width:500px; margin:0 auto 2rem; font-size:0.92rem; }

/* ===================== FOOTER ===================== */
footer {
  background:var(--charcoal); color:rgba(255,255,255,0.5);
  padding:2.5rem 4rem;
  display:flex; justify-content:space-between;
  align-items:center; font-size:0.78rem; letter-spacing:0.08em;
  flex-wrap:wrap; gap:1rem;
}
footer .nav-logo { color:rgba(255,255,255,0.75); font-size:1.15rem; }
footer .nav-logo small { color:rgba(255,255,255,0.3); }

/* ===================== TOAST ===================== */
.toast {
  position:fixed; bottom:2rem; right:2rem;
  background:var(--charcoal); color:white;
  padding:0.9rem 1.5rem; border-radius:12px;
  font-size:0.85rem; z-index:2000;
  transform:translateY(100px); opacity:0;
  transition:all 0.4s; box-shadow:0 8px 30px rgba(0,0,0,0.2);
  display:flex; align-items:center; gap:0.7rem;
}
.toast.show { transform:translateY(0); opacity:1; }
.toast.success { border-left:3px solid var(--sage); }
.toast.error { border-left:3px solid #c0605a; }

/* ===================== LOGGED IN STATE ===================== */
.user-menu {
  display:none; align-items:center; gap:0.8rem;
  margin-left:auto;
}
.user-menu.show { display:flex; }
.user-avatar {
  width:34px; height:34px; border-radius:50%;
  background:linear-gradient(135deg, var(--blush), var(--dusty-rose));
  display:flex; align-items:center; justify-content:center;
  font-size:0.85rem; color:white; font-weight:600;
  cursor:pointer;
}
.user-name { font-size:0.82rem; color:var(--charcoal); font-weight:400; }
.btn-post-nav {
  background:var(--terracotta); color:white;
  border:none; border-radius:50px;
  padding:0.45rem 1.1rem; font-size:0.78rem;
  font-family:'Zen Kaku Gothic New',sans-serif;
  cursor:pointer; letter-spacing:0.1em;
  transition:all 0.3s;
}
.btn-post-nav:hover { background:var(--terracotta-dark); }
.nav-auth-btns { display:flex; gap:0.5rem; margin-left:auto; }

/* ===================== PRODUCT DETAIL MODAL ===================== */
#productDetailModal .modal {
  max-width:680px; padding:0; overflow:hidden;
}
.product-detail-header {
  display:flex; align-items:center; gap:1.8rem;
  padding:2rem 2rem 1.5rem;
  background:linear-gradient(135deg, var(--blush) 0%, var(--warm-white) 100%);
  border-bottom:1px solid var(--light-border);
  position:relative;
}
.product-detail-emoji {
  font-size:4rem; width:90px; height:90px;
  background:white; border-radius:20px;
  display:flex; align-items:center; justify-content:center;
  box-shadow:0 4px 20px var(--shadow); flex-shrink:0;
}
.product-detail-header h2 {
  font-family:'Shippori Mincho',serif;
  font-size:1.4rem; font-weight:800; margin-bottom:0.25rem;
}
.product-detail-brand {
  font-size:0.78rem; color:var(--sage);
  letter-spacing:0.2em; text-transform:uppercase; margin-bottom:0.5rem;
}
.product-detail-rating-row {
  display:flex; align-items:center; gap:0.6rem; flex-wrap:wrap;
}
.product-detail-rating-row .stars { font-size:1rem; }
.product-detail-rating-row .score {
  font-family:'Shippori Mincho',serif;
  font-size:1.3rem; font-weight:700; color:var(--terracotta);
}
.product-detail-rating-row .count { font-size:0.8rem; color:var(--mid-gray); }
.product-detail-close {
  position:absolute; top:1rem; right:1.2rem;
  background:rgba(255,255,255,0.7); border:none;
  width:32px; height:32px; border-radius:50%;
  font-size:1.1rem; cursor:pointer; color:var(--mid-gray);
  display:flex; align-items:center; justify-content:center;
  transition:all 0.2s;
}
.product-detail-close:hover { background:white; color:var(--charcoal); }

.product-detail-body { padding:1.8rem 2rem; overflow-y:auto; max-height:65vh; }

/* Rating breakdown */
.rating-breakdown { margin-bottom:2rem; }
.rating-breakdown h4 {
  font-family:'Shippori Mincho',serif;
  font-size:1rem; font-weight:700; margin-bottom:1rem; color:var(--charcoal);
}
.rating-bar-row {
  display:flex; align-items:center; gap:0.8rem; margin-bottom:0.45rem;
}
.rating-bar-label { font-size:0.78rem; color:var(--mid-gray); width:30px; text-align:right; }
.rating-bar-track {
  flex:1; height:8px; background:var(--light-gray);
  border-radius:10px; overflow:hidden;
}
.rating-bar-fill {
  height:100%;
  background:linear-gradient(90deg, var(--blush), var(--terracotta));
  border-radius:10px; transition:width 0.6s ease;
}
.rating-bar-count { font-size:0.73rem; color:#bbb; width:30px; }

/* Ingredient badges */
.ingredients-section-detail { margin-bottom:2rem; }
.ingredients-section-detail h4 {
  font-family:'Shippori Mincho',serif;
  font-size:1rem; font-weight:700; margin-bottom:0.8rem;
}
.ingredient-badges { display:flex; flex-wrap:wrap; gap:0.5rem; }
.ing-badge {
  padding:0.3rem 0.9rem; border-radius:20px;
  font-size:0.75rem; font-weight:500; letter-spacing:0.05em;
}
.ing-badge.good { background:#e8f4e8; color:var(--deep-sage); border:1px solid #c0dcc0; }
.ing-badge.neutral { background:var(--light-gray); color:var(--mid-gray); border:1px solid var(--light-border); }

/* Reviews in detail */
.detail-reviews-header {
  display:flex; justify-content:space-between; align-items:center;
  margin-bottom:1rem;
}
.detail-reviews-header h4 {
  font-family:'Shippori Mincho',serif;
  font-size:1rem; font-weight:700;
}
.btn-write-review {
  background:var(--terracotta); color:white;
  border:none; border-radius:50px;
  padding:0.4rem 1rem; font-size:0.78rem;
  font-family:'Zen Kaku Gothic New',sans-serif;
  cursor:pointer; letter-spacing:0.08em; transition:all 0.3s;
}
.btn-write-review:hover { background:var(--terracotta-dark); }
.detail-review-item {
  padding:1.1rem; background:var(--cream);
  border-radius:14px; border:1px solid var(--light-border);
  margin-bottom:0.8rem; transition:box-shadow 0.2s;
}
.detail-review-item:hover { box-shadow:0 4px 16px var(--shadow); }
.detail-review-top {
  display:flex; align-items:center; gap:0.7rem; margin-bottom:0.5rem;
}
.detail-review-top .avatar { width:32px; height:32px; font-size:0.8rem; flex-shrink:0; }
.detail-review-top .name { font-size:0.83rem; font-weight:500; }
.detail-review-top .stars { font-size:0.8rem; margin-left:auto; }
.detail-review-top .date { font-size:0.72rem; color:#bbb; }
.detail-review-text { font-size:0.83rem; color:var(--mid-gray); line-height:1.9; }

/* ===================== ARTICLE DETAIL MODAL ===================== */
#articleDetailModal .modal {
  max-width:720px; padding:0; overflow:hidden;
}
.article-detail-header {
  padding:2rem 2rem 1.5rem;
  background:var(--charcoal);
  position:relative;
}
.article-detail-header .back-btn {
  display:inline-flex; align-items:center; gap:0.4rem;
  font-size:0.75rem; color:rgba(255,255,255,0.5);
  background:none; border:none; cursor:pointer;
  letter-spacing:0.1em; margin-bottom:1rem;
  transition:color 0.2s; font-family:'Zen Kaku Gothic New',sans-serif;
}
.article-detail-header .back-btn:hover { color:white; }
.article-detail-tag {
  display:inline-block; font-size:0.68rem;
  letter-spacing:0.3em; text-transform:uppercase;
  color:var(--dusty-rose); margin-bottom:0.7rem;
  background:rgba(201,160,144,0.15);
  padding:0.25rem 0.8rem; border-radius:20px;
  border:1px solid rgba(201,160,144,0.3);
}
.article-detail-header h2 {
  font-family:'Shippori Mincho',serif;
  font-size:1.35rem; font-weight:800;
  color:white; line-height:1.5; margin-bottom:1rem;
}
.article-detail-meta {
  display:flex; align-items:center; gap:1rem; flex-wrap:wrap;
}
.article-author-row {
  display:flex; align-items:center; gap:0.6rem;
}
.article-author-row .avatar {
  width:32px; height:32px; font-size:0.8rem;
}
.article-author-row .name { font-size:0.82rem; color:rgba(255,255,255,0.75); }
.article-detail-date { font-size:0.75rem; color:rgba(255,255,255,0.4); }
.article-detail-close {
  position:absolute; top:1rem; right:1.2rem;
  background:rgba(255,255,255,0.1); border:none;
  width:32px; height:32px; border-radius:50%;
  font-size:1.1rem; cursor:pointer; color:rgba(255,255,255,0.6);
  display:flex; align-items:center; justify-content:center;
  transition:all 0.2s;
}
.article-detail-close:hover { background:rgba(255,255,255,0.2); color:white; }

.article-detail-body {
  padding:2rem; overflow-y:auto; max-height:65vh;
  background:var(--warm-white);
}
.article-content {
  font-size:0.92rem; color:var(--charcoal);
  line-height:2.2; margin-bottom:2rem;
}
.article-content h3 {
  font-family:'Shippori Mincho',serif;
  font-size:1.1rem; font-weight:700;
  color:var(--charcoal); margin:1.5rem 0 0.6rem;
  padding-left:0.8rem;
  border-left:3px solid var(--dusty-rose);
}
.article-content p { margin-bottom:1rem; color:var(--mid-gray); }
.article-content ul { padding-left:1.5rem; margin-bottom:1rem; }
.article-content li { color:var(--mid-gray); margin-bottom:0.4rem; font-size:0.88rem; }
.article-content .highlight-box {
  background:linear-gradient(135deg,rgba(240,217,204,0.4),rgba(250,246,240,0.8));
  border:1px solid var(--light-border); border-radius:12px;
  padding:1.2rem 1.5rem; margin:1.2rem 0;
}
.article-content .highlight-box p { color:var(--charcoal); margin:0; font-size:0.88rem; }

/* Article comments */
.article-comments-section { border-top:1px solid var(--light-border); padding-top:1.5rem; }
.article-comments-section h4 {
  font-family:'Shippori Mincho',serif;
  font-size:1rem; font-weight:700; margin-bottom:1rem;
}
.comment-item {
  display:flex; gap:0.8rem; margin-bottom:1.1rem;
  padding-bottom:1.1rem; border-bottom:1px solid var(--light-border);
}
.comment-item:last-of-type { border-bottom:none; }
.comment-body { flex:1; }
.comment-header {
  display:flex; align-items:center; gap:0.5rem; margin-bottom:0.3rem;
}
.comment-name { font-size:0.82rem; font-weight:500; }
.comment-date { font-size:0.72rem; color:#bbb; }
.comment-text { font-size:0.83rem; color:var(--mid-gray); line-height:1.8; }
.comment-form { margin-top:1.2rem; display:flex; gap:0.7rem; align-items:flex-start; }
.comment-form textarea {
  flex:1; padding:0.65rem 1rem;
  border:1.5px solid var(--light-border);
  border-radius:12px; resize:none; height:70px;
  font-family:'Zen Kaku Gothic New',sans-serif;
  font-size:0.85rem; outline:none;
  transition:border-color 0.3s; background:white;
}
.comment-form textarea:focus { border-color:var(--dusty-rose); }
.btn-comment-send {
  background:var(--terracotta); color:white; border:none;
  border-radius:12px; padding:0.65rem 1.1rem;
  font-size:0.8rem; cursor:pointer;
  font-family:'Zen Kaku Gothic New',sans-serif;
  transition:all 0.3s; white-space:nowrap; align-self:flex-end;
}
.btn-comment-send:hover { background:var(--terracotta-dark); }

/* ===================== SCROLL ANIM ===================== */
.fade-in {
  opacity:0; transform:translateY(22px);
  transition:opacity 0.7s ease, transform 0.7s ease;
}
.fade-in.visible { opacity:1; transform:translateY(0); }

/* ===================== RESPONSIVE ===================== */
@media (max-width:960px) {
  nav { padding:0.8rem 1.2rem; gap:0.8rem; }
  nav ul { display:none; }
  .nav-auth-btns { display:none; }
  .hero { grid-template-columns:1fr; padding:7rem 2rem 3rem; }
  .hero-visual { display:none; }
  .section-wrap { padding:3.5rem 1.5rem; }
  .reviews-grid { grid-template-columns:1fr; }
  .products-grid { grid-template-columns:repeat(2,1fr); }
  .articles-grid { grid-template-columns:1fr; }
  .faq-grid { grid-template-columns:1fr; }
  footer { padding:2rem 1.5rem; flex-direction:column; text-align:center; }
}
</style>
</head>
<body>

<!-- ============ NAV ============ -->
<nav>
  <a href="#" class="nav-logo">
    HADAERU
    <small>æ•æ„Ÿè‚Œã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£</small>
  </a>
  <div class="nav-search">
    <span class="search-icon">ğŸ”</span>
    <input type="text" id="searchInput" placeholder="å•†å“ãƒ»ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ»è¨˜äº‹åã§æ¤œç´¢..." autocomplete="off">
    <div class="search-dropdown" id="searchDropdown"></div>
  </div>
  <ul id="navLinks">
    <li><a href="#reviews">ãƒ¬ãƒ“ãƒ¥ãƒ¼</a></li>
    <li><a href="#products">å•†å“</a></li>
    <li><a href="#articles">è¨˜äº‹</a></li>
    <li><a href="#faq">FAQ</a></li>
  </ul>
  <div class="nav-auth-btns" id="navAuthBtns">
    <a href="#" class="nav-logo" style="font-size:0;padding:0;border:none" onclick="openModal('loginModal');return false;">
      <button class="btn-nav-login" style="font-family:'Zen Kaku Gothic New',sans-serif;font-size:0.78rem;padding:0.45rem 1rem;border-radius:50px;cursor:pointer;border:1.5px solid var(--dusty-rose);background:white;color:var(--terracotta);letter-spacing:0.1em;">ãƒ­ã‚°ã‚¤ãƒ³</button>
    </a>
    <button class="btn-nav-register" onclick="openModal('registerModal')" style="font-family:'Zen Kaku Gothic New',sans-serif;font-size:0.78rem;padding:0.45rem 1rem;border-radius:50px;cursor:pointer;border:none;background:var(--terracotta);color:white;letter-spacing:0.1em;">æ–°è¦ç™»éŒ²</button>
  </div>
  <div class="user-menu" id="userMenu">
    <div class="user-avatar" id="userAvatarNav">ï¼Ÿ</div>
    <span class="user-name" id="userNameNav">ã‚²ã‚¹ãƒˆ</span>
    <div class="post-dropdown-wrap" style="position:relative">
      <button class="btn-post-nav" onclick="togglePostDropdown()">ï¼‹ æŠ•ç¨¿ã™ã‚‹ â–¾</button>
      <div id="postDropdown" style="display:none;position:absolute;top:calc(100% + 8px);right:0;background:white;border:1px solid var(--light-border);border-radius:12px;box-shadow:0 8px 28px var(--shadow);min-width:170px;overflow:hidden;z-index:700;">
        <div onclick="closePostDropdown();checkLoginForPost('review')" style="padding:0.75rem 1.2rem;font-size:0.83rem;cursor:pointer;display:flex;align-items:center;gap:0.6rem;border-bottom:1px solid var(--light-border);transition:background 0.2s;" onmouseover="this.style.background='var(--light-gray)'" onmouseout="this.style.background=''">âœï¸ ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æŠ•ç¨¿</div>
        <div onclick="closePostDropdown();checkLoginForPost('article')" style="padding:0.75rem 1.2rem;font-size:0.83rem;cursor:pointer;display:flex;align-items:center;gap:0.6rem;transition:background 0.2s;" onmouseover="this.style.background='var(--light-gray)'" onmouseout="this.style.background=''">ğŸ“ è¨˜äº‹ã‚’æŠ•ç¨¿</div>
      </div>
    </div>
    <button onclick="logout()" style="background:none;border:none;font-size:0.78rem;color:var(--mid-gray);cursor:pointer;letter-spacing:0.05em;">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
  </div>
</nav>

<!-- ============ LOGIN MODAL ============ -->
<div class="modal-overlay" id="loginModal">
  <div class="modal">
    <button class="modal-close" onclick="closeModal('loginModal')">Ã—</button>
    <h2>ãŠã‹ãˆã‚Šãªã•ã„ ğŸŒ¸</h2>
    <p class="subtitle">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„</p>
    <div class="form-group">
      <label>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
      <input type="email" id="loginEmail" placeholder="example@email.com">
    </div>
    <div class="form-group">
      <label>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
      <input type="password" id="loginPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
    </div>
    <button class="btn-submit" onclick="handleLogin()">ãƒ­ã‚°ã‚¤ãƒ³</button>
    <p class="modal-switch">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ãªã„æ–¹ã¯ <a onclick="switchModal('loginModal','registerModal')">æ–°è¦ç™»éŒ²</a></p>
  </div>
</div>

<!-- ============ REGISTER MODAL ============ -->
<div class="modal-overlay" id="registerModal">
  <div class="modal">
    <button class="modal-close" onclick="closeModal('registerModal')">Ã—</button>
    <h2>ã¯ã˜ã‚ã¾ã—ã¦ ğŸŒ¿</h2>
    <p class="subtitle">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã¦ã€è‚Œã®æƒ…å ±ã‚’å…±æœ‰ã—ã¾ã—ã‚‡ã†</p>
    <div class="form-group">
      <label>ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ </label>
      <input type="text" id="regName" placeholder="ã•ãã‚‰">
    </div>
    <div class="form-group">
      <label>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
      <input type="email" id="regEmail" placeholder="example@email.com">
    </div>
    <div class="form-group">
      <label>è‚Œã‚¿ã‚¤ãƒ—</label>
      <select id="regSkinType">
        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
        <option>ä¹¾ç‡¥æ€§æ•æ„Ÿè‚Œ</option>
        <option>æ··åˆæ€§æ•æ„Ÿè‚Œ</option>
        <option>ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼æ€§æ•æ„Ÿè‚Œ</option>
        <option>ãƒ‹ã‚­ãƒ“æ··åˆå‹</option>
      </select>
    </div>
    <div class="form-group">
      <label>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
      <input type="password" id="regPassword" placeholder="8æ–‡å­—ä»¥ä¸Š">
    </div>
    <button class="btn-submit" onclick="handleRegister()">ç„¡æ–™ã§ç™»éŒ²ã™ã‚‹</button>
    <p class="modal-switch">ã™ã§ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã®æ–¹ã¯ <a onclick="switchModal('registerModal','loginModal')">ãƒ­ã‚°ã‚¤ãƒ³</a></p>
  </div>
</div>

<!-- ============ POST MODAL ============ -->
<div class="modal-overlay" id="postModal">
  <div class="modal">
    <button class="modal-close" onclick="closeModal('postModal')">Ã—</button>
    <h2>ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æŠ•ç¨¿ âœï¸</h2>
    <p class="subtitle">ã‚ãªãŸã®ä½“é¨“ã‚’æ•æ„Ÿè‚Œã®ä»²é–“ã«ã‚·ã‚§ã‚¢ã—ã¾ã—ã‚‡ã†</p>
    <div class="form-group">
      <label>å•†å“å</label>
      <input type="text" id="postProduct" placeholder="ä¾‹ï¼šã—ã£ã¨ã‚ŠåŒ–ç²§æ°´ ã‚»ãƒ³ã‚·ãƒ†ã‚£ãƒ–">
    </div>
    <div class="form-group">
      <label>ãƒ–ãƒ©ãƒ³ãƒ‰å</label>
      <input type="text" id="postBrand" placeholder="ä¾‹ï¼šhada labo, FANCL ãªã©">
    </div>
    <div class="form-group">
      <label>ç·åˆè©•ä¾¡</label>
      <div class="star-rating" id="starRating">
        <span onclick="setRating(1)">â˜…</span>
        <span onclick="setRating(2)">â˜…</span>
        <span onclick="setRating(3)">â˜…</span>
        <span onclick="setRating(4)">â˜…</span>
        <span onclick="setRating(5)">â˜…</span>
      </div>
    </div>
    <div class="form-group">
      <label>ãƒ¬ãƒ“ãƒ¥ãƒ¼æœ¬æ–‡</label>
      <textarea id="postText" placeholder="ä½¿ç”¨æ„Ÿã€åŠ¹æœã€æ•æ„Ÿè‚Œã¸ã®å½±éŸ¿ãªã©ã‚’è©³ã—ãæ•™ãˆã¦ãã ã•ã„..."></textarea>
    </div>
    <div class="form-group">
      <label>å•†å“ç”»åƒï¼ˆä»»æ„ï¼‰</label>
      <div class="image-upload-area" onclick="document.getElementById('imageInput').click()">
        <div class="upload-icon">ğŸ“¸</div>
        <p>ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç”»åƒã‚’é¸æŠï¼ˆè¤‡æ•°å¯ï¼‰</p>
      </div>
      <input type="file" id="imageInput" accept="image/*" multiple style="display:none" onchange="previewImages(this)">
      <div class="image-preview" id="imagePreview"></div>
    </div>
    <button class="btn-submit" onclick="handlePost()">æŠ•ç¨¿ã™ã‚‹</button>
  </div>
</div>

<!-- ============ ARTICLE MODAL ============ -->
<div class="modal-overlay" id="articleModal">
  <div class="modal" style="max-width:560px">
    <button class="modal-close" onclick="closeModal('articleModal')">Ã—</button>
    <h2>è¨˜äº‹ã‚’æŠ•ç¨¿ ğŸ“</h2>
    <p class="subtitle">æ•æ„Ÿè‚Œã®ä»²é–“ã«å½¹ç«‹ã¤æƒ…å ±ã‚’æ›¸ã„ã¦å…±æœ‰ã—ã¾ã—ã‚‡ã†</p>
    <div class="form-group">
      <label>ã‚¿ã‚¤ãƒˆãƒ«</label>
      <input type="text" id="articleTitle" placeholder="ä¾‹ï¼šä¹¾ç‡¥æ•æ„Ÿè‚ŒãŒ1ãƒ¶æœˆè©¦ã—ãŸãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã¾ã¨ã‚">
    </div>
    <div class="form-group">
      <label>ã‚«ãƒ†ã‚´ãƒª</label>
      <select id="articleCategory">
        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
        <option>æˆåˆ†ã‚¬ã‚¤ãƒ‰</option>
        <option>ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ãƒ»ã‚±ã‚¢æ–¹æ³•</option>
        <option>å­£ç¯€ã‚±ã‚¢</option>
        <option>åŸºç¤çŸ¥è­˜</option>
        <option>ä½“é¨“è«‡ãƒ»ãƒ¬ãƒãƒ¼ãƒˆ</option>
        <option>ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ»å•†å“ç´¹ä»‹</option>
        <option>Q&amp;Aãƒ»æ‚©ã¿ç›¸è«‡</option>
      </select>
    </div>
    <div class="form-group">
      <label>ã‚«ãƒãƒ¼ç”»åƒï¼ˆä»»æ„ï¼‰</label>
      <div class="image-upload-area" onclick="document.getElementById('articleImageInput').click()">
        <div class="upload-icon">ğŸ–¼ï¸</div>
        <p>ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚«ãƒãƒ¼ç”»åƒã‚’é¸æŠ</p>
      </div>
      <input type="file" id="articleImageInput" accept="image/*" style="display:none" onchange="previewArticleImage(this)">
      <div id="articleImagePreview" style="margin-top:0.8rem"></div>
    </div>
    <div class="form-group">
      <label>æœ¬æ–‡</label>
      <textarea id="articleBody" style="min-height:160px" placeholder="è¨˜äº‹ã®å†…å®¹ã‚’æ›¸ã„ã¦ãã ã•ã„ã€‚&#10;&#10;ã€è¦‹å‡ºã—ä¾‹ã€‘&#10;## ã¯ã˜ã‚ã«&#10;## ä½¿ç”¨ã—ãŸå•†å“&#10;## çµæœãƒ»æ„Ÿæƒ³&#10;&#10;ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³å½¢å¼ã§æ›¸ãã¨èª­ã¿ã‚„ã™ããªã‚Šã¾ã™ã€‚"></textarea>
    </div>
    <div class="form-group">
      <label>ã‚¿ã‚°ï¼ˆä»»æ„ãƒ»ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰</label>
      <input type="text" id="articleTags" placeholder="ä¾‹ï¼šä¹¾ç‡¥è‚Œ, ã‚»ãƒ©ãƒŸãƒ‰, å†¬ã‚±ã‚¢">
    </div>
    <button class="btn-submit" onclick="handleArticlePost()">è¨˜äº‹ã‚’æŠ•ç¨¿</button>
  </div>
</div>

<!-- ============ HERO ============ -->
<section class="hero">
  <div class="hero-blob"></div>
  <div class="hero-text">
    <span class="hero-tag">sensitive skin community</span>
    <h1>
      æ•æ„Ÿè‚Œã®<em>ãƒªã‚¢ãƒ«ãªå£°</em>ãŒã€<br>
      ã‚ãªãŸã‚’<em>å®ˆã‚‹ã€‚</em>
    </h1>
    <p>ã‚¹ã‚­ãƒ³ã‚±ã‚¢é¸ã³ã«æ‚©ã‚€æ•æ„Ÿè‚Œã®æ–¹ã¸ã€‚å®Ÿéš›ã«è©¦ã—ãŸäººã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨æƒ…å ±ãŒé›†ã¾ã‚‹ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚µã‚¤ãƒˆã§ã™ã€‚èª°ã‹ã®çµŒé¨“ãŒã€ã‚ãªãŸã®åŠ©ã‘ã«ã€‚ã‚ãªãŸã®çµŒé¨“ãŒã€èª°ã‹ã®åŠ©ã‘ã«ã€‚</p>
    <div class="hero-btns">
      <button class="btn-primary" onclick="openModal('registerModal')">ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆç„¡æ–™ï¼‰</button>
      <a href="#reviews" class="btn-outline">ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è¦‹ã‚‹</a>
    </div>
  </div>
  <div class="hero-visual">
    <div class="hero-stats">
      <div class="stat-card fade-in">
        <div>
          <span class="num">2,847</span>
          <span class="label">ç™»éŒ²ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°</span>
        </div>
      </div>
      <div class="stat-card fade-in" style="transition-delay:0.1s">
        <span class="num">1,204</span>
        <span class="label">å•†å“ãƒ¬ãƒ“ãƒ¥ãƒ¼</span>
      </div>
      <div class="stat-card fade-in" style="transition-delay:0.2s">
        <span class="num">386</span>
        <span class="label">æ²è¼‰ãƒ–ãƒ©ãƒ³ãƒ‰</span>
      </div>
      <div class="stat-card fade-in" style="transition-delay:0.3s">
        <span class="num">4.8</span>
        <span class="label">å¹³å‡æº€è¶³åº¦</span>
      </div>
    </div>
  </div>
</section>

<!-- ============ LATEST REVIEWS ============ -->
<section class="section-wrap reviews-section" id="reviews">
  <div class="section-header">
    <div>
      <p class="section-label">latest reviews</p>
      <h2 class="section-title">æ–°ç€ãƒ¬ãƒ“ãƒ¥ãƒ¼</h2>
    </div>
    <a href="#" class="see-all">ã™ã¹ã¦è¦‹ã‚‹ â†’</a>
  </div>
  <div class="reviews-grid" id="reviewsGrid"></div>
</section>

<!-- ============ PRODUCTS ============ -->
<section class="section-wrap products-section" id="products">
  <div class="section-header">
    <div>
      <p class="section-label">top products</p>
      <h2 class="section-title">äººæ°—ã‚¹ã‚­ãƒ³ã‚±ã‚¢å•†å“</h2>
    </div>
    <a href="#" class="see-all">ã™ã¹ã¦è¦‹ã‚‹ â†’</a>
  </div>
  <div class="filter-tabs" id="filterTabs">
    <button class="filter-tab active" onclick="filterProducts('all',this)">ã™ã¹ã¦</button>
    <button class="filter-tab" onclick="filterProducts('åŒ–ç²§æ°´',this)">åŒ–ç²§æ°´</button>
    <button class="filter-tab" onclick="filterProducts('ä¿æ¹¿ã‚¯ãƒªãƒ¼ãƒ ',this)">ä¿æ¹¿ã‚¯ãƒªãƒ¼ãƒ </button>
    <button class="filter-tab" onclick="filterProducts('æ´—é¡”',this)">æ´—é¡”</button>
    <button class="filter-tab" onclick="filterProducts('ç¾å®¹æ¶²',this)">ç¾å®¹æ¶²</button>
    <button class="filter-tab" onclick="filterProducts('æ—¥ç„¼ã‘æ­¢ã‚',this)">æ—¥ç„¼ã‘æ­¢ã‚</button>
  </div>
  <div class="products-grid" id="productsGrid"></div>
</section>

<!-- ============ ARTICLES ============ -->
<section class="section-wrap articles-section" id="articles">
  <div class="section-header">
    <div>
      <p class="section-label">featured articles</p>
      <h2 class="section-title">æ•æ„Ÿè‚Œã®ãŸã‚ã®è¨˜äº‹</h2>
    </div>
    <a href="#" class="see-all" style="color:var(--dusty-rose)">ã™ã¹ã¦è¦‹ã‚‹ â†’</a>
  </div>
  <div class="articles-grid" id="articlesGrid"></div>
</section>

<!-- ============ FAQ ============ -->
<section class="section-wrap faq-section" id="faq">
  <div class="section-header">
    <div>
      <p class="section-label">frequently asked questions</p>
      <h2 class="section-title">ã‚ˆãã‚ã‚‹è³ªå•</h2>
    </div>
  </div>
  <div class="faq-grid" id="faqGrid"></div>
</section>

<!-- ============ POST CTA ============ -->
<section class="section-wrap post-cta">
  <p class="section-label">share your experience</p>
  <h2 class="section-title fade-in">ã‚ãªãŸã®çµŒé¨“ãŒ<br>èª°ã‹ã®åŠ©ã‘ã«ã€‚</h2>
  <p class="fade-in">æ•æ„Ÿè‚Œã®æ‚©ã¿ã‚’æŒã¤äººãŸã¡ã«ã€ãƒªã‚¢ãƒ«ãªä½¿ç”¨æ„Ÿã‚’å±Šã‘ã¾ã—ã‚‡ã†ã€‚ã‚ãªãŸã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚’æ”¯ãˆã¾ã™ã€‚</p>
  <div class="fade-in">
    <button class="btn-primary" onclick="checkLoginForPost('review')">âœï¸ ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æŠ•ç¨¿</button>
    <button class="btn-outline" onclick="checkLoginForPost('article')" style="margin-left:1rem">ğŸ“ è¨˜äº‹ã‚’æŠ•ç¨¿</button>
  </div>
</section>

<!-- ============ ARTICLE DETAIL MODAL ============ -->
<div class="modal-overlay" id="articleDetailModal">
  <div class="modal">
    <div class="article-detail-header">
      <button class="article-detail-close" onclick="closeModal('articleDetailModal')">Ã—</button>
      <div class="article-detail-tag" id="adTag">æˆåˆ†ã‚¬ã‚¤ãƒ‰</div>
      <h2 id="adTitle">è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«</h2>
      <div class="article-detail-meta">
        <div class="article-author-row">
          <div class="avatar" id="adAuthorAvatar">H</div>
          <span class="name" id="adAuthor">HADAERUç·¨é›†éƒ¨</span>
        </div>
        <span class="article-detail-date" id="adDate">2026.02.22</span>
        <span style="font-size:0.72rem;color:rgba(255,255,255,0.35)" id="adReadTime">èª­äº† ç´„3åˆ†</span>
      </div>
    </div>
    <div class="article-detail-body">
      <div class="article-content" id="adContent"></div>
      <div class="article-comments-section">
        <h4 id="adCommentTitle">ğŸ’¬ ã‚³ãƒ¡ãƒ³ãƒˆ (0)</h4>
        <div id="adCommentsList"></div>
        <div class="comment-form">
          <textarea id="adCommentInput" placeholder="ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ›¸ã..."></textarea>
          <button class="btn-comment-send" onclick="postArticleComment()">é€ä¿¡</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ============ PRODUCT DETAIL MODAL ============ -->
<div class="modal-overlay" id="productDetailModal">
  <div class="modal">
    <div class="product-detail-header" id="productDetailHeader">
      <button class="product-detail-close" onclick="closeModal('productDetailModal')">Ã—</button>
      <div class="product-detail-emoji" id="detailEmoji">ğŸ§´</div>
      <div>
        <p class="product-detail-brand" id="detailBrand">BRAND</p>
        <h2 id="detailName">å•†å“å</h2>
        <div class="product-detail-rating-row">
          <span class="stars" id="detailStars">â˜…â˜…â˜…â˜…â˜…</span>
          <span class="score" id="detailScore">4.8</span>
          <span class="count" id="detailCount">(312ä»¶ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼)</span>
        </div>
        <div class="product-tags" style="margin-top:0.6rem" id="detailTags"></div>
      </div>
    </div>
    <div class="product-detail-body">
      <!-- Rating Breakdown -->
      <div class="rating-breakdown">
        <h4>è©•ä¾¡ã®å†…è¨³</h4>
        <div id="ratingBars"></div>
      </div>
      <!-- Ingredients -->
      <div class="ingredients-section-detail">
        <h4>ğŸ”¬ ä¸»ãªæˆåˆ†</h4>
        <div class="ingredient-badges" id="detailIngredients"></div>
      </div>
      <!-- Reviews -->
      <div>
        <div class="detail-reviews-header">
          <h4>ğŸ’¬ ã¿ã‚“ãªã®ãƒ¬ãƒ“ãƒ¥ãƒ¼</h4>
          <button class="btn-write-review" onclick="closeModal('productDetailModal');checkLoginForPost('review')">âœï¸ ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ›¸ã</button>
        </div>
        <div id="detailReviewsList"></div>
      </div>
    </div>
  </div>
</div>

<!-- ============ FOOTER ============ -->
<footer>
  <a href="#" class="nav-logo">
    HADAERU
    <small>sensitive skin community</small>
  </a>
  <p>Â© 2026 HADAERU â€” æ•æ„Ÿè‚Œã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚µã‚¤ãƒˆ</p>
  <p>â€» ã“ã®ã‚µã‚¤ãƒˆã®æƒ…å ±ã¯åŒ»ç™‚çš„ãªã‚¢ãƒ‰ãƒã‚¤ã‚¹ã§ã¯ã‚ã‚Šã¾ã›ã‚“</p>
</footer>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
// ===================== SUPABASE INIT =====================
const SUPABASE_URL = 'https://wstsposcftyudeuudwod.supabase.co';
const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndzdHNwb3NjZnR5dWRldXVkd29kIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIxODg2ODgsImV4cCI6MjA4Nzc2NDY4OH0.dpX0J3LGlFX8b7MNgW0cFUT9YcwyQleE8Bsgk8sOSHA';
const sb = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

// ===================== DATAï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”¨ï¼‰ =====================
const dummyReviews = [
  { id:1, product:"ãƒãƒˆãƒ ã‚®åŒ–ç²§æ°´ 200ml", brand:"hada labo", rating:5, text:"æ•æ„Ÿè‚Œã§ã‚‚å…¨ããƒ’ãƒªãƒ’ãƒªã—ã¾ã›ã‚“ï¼ä½¿ã„å§‹ã‚ã¦1é€±é–“ã§æ˜ã‚‰ã‹ã«è‚Œã®ä¹¾ç‡¥ãŒæ”¹å–„ã•ã‚Œã¾ã—ãŸã€‚ã‚³ã‚¹ãƒ‘ã‚‚æœ€é«˜ã§æ¯æ—¥ãŸã£ã·ã‚Šä½¿ãˆã‚‹ã®ãŒå¬‰ã—ã„ã§ã™ã€‚", author:"ã•ãã‚‰", date:"2026.02.20", emoji:"ğŸ§´", tags:["åŒ–ç²§æ°´","ä¿æ¹¿"] },
  { id:2, product:"æ¥µæ½¤ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ’ã‚¢ãƒ«ãƒ­ãƒ³æ¶²", brand:"hada labo", rating:4, text:"ãƒ†ã‚¯ã‚¹ãƒãƒ£ãƒ¼ãŒå°‘ã—ã¨ã‚ã¿ãŒã‚ã£ã¦è‚Œã«ã—ã£ã‹ã‚Šå¯†ç€ã—ã¾ã™ã€‚é¦™æ–™ä¸ä½¿ç”¨ã§æ•æ„Ÿè‚Œã«å„ªã—ã„ã€‚ã‚‚ã†å°‘ã—ã•ã£ã±ã‚Šã—ã¦ã„ã‚‹ã¨å¬‰ã—ã„ã‹ãªã€‚", author:"ã¿ã", date:"2026.02.19", emoji:"ğŸ’§", tags:["åŒ–ç²§æ°´","ãƒ’ã‚¢ãƒ«ãƒ­ãƒ³é…¸"] },
  { id:3, product:"ã‚»ãƒ©ãƒŸãƒ‰ä¿æ¹¿ã‚¯ãƒªãƒ¼ãƒ ", brand:"CeraVe", rating:5, text:"æµ·å¤–è£½å“ã§ã™ãŒæˆåˆ†è¡¨ç¤ºãŒã‚·ãƒ³ãƒ—ãƒ«ã§å®‰å¿ƒã€‚ã‚»ãƒ©ãƒŸãƒ‰ãŒã—ã£ã‹ã‚Šé…åˆã•ã‚Œã¦ã„ã¦ãƒãƒªã‚¢æ©Ÿèƒ½ãŒç›®ã«è¦‹ãˆã¦æ”¹å–„ã€‚å†¬ã®ä¹¾ç‡¥ã§ã‚‚ã—ã£ã¨ã‚Šä¿ã¦ã¾ã™ã€‚", author:"ã‚†ã„", date:"2026.02.18", emoji:"ğŸ¶", tags:["ä¿æ¹¿ã‚¯ãƒªãƒ¼ãƒ ","ã‚»ãƒ©ãƒŸãƒ‰"] },
];

const dummyProducts = [
  { id:1, name:"ãƒãƒˆãƒ ã‚®åŒ–ç²§æ°´ 200ml", brand:"hada labo", category:"åŒ–ç²§æ°´", rating:4.8, reviews:312, emoji:"ğŸ§´", tags:["ç„¡é¦™æ–™","ç„¡ç€è‰²","ä½åˆºæ¿€"],
    ratingDist:[180,80,35,12,5], ingredients:[{name:"ãƒ’ã‚¢ãƒ«ãƒ­ãƒ³é…¸Na",good:true},{name:"ã‚°ãƒªã‚»ãƒªãƒ³",good:true},{name:"ãƒãƒˆãƒ ã‚®ã‚¨ã‚­ã‚¹",good:true},{name:"BG",good:false},{name:"ãƒ•ã‚§ãƒã‚­ã‚·ã‚¨ã‚¿ãƒãƒ¼ãƒ«",good:false}],
    detailReviews:[
      {author:"ã•ãã‚‰",rating:5,text:"æ•æ„Ÿè‚Œã§ã‚‚å…¨ããƒ’ãƒªãƒ’ãƒªã—ã¾ã›ã‚“ï¼1é€±é–“ã§ä¹¾ç‡¥ãŒæ”¹å–„ã•ã‚Œã¾ã—ãŸã€‚ã‚³ã‚¹ãƒ‘æœ€é«˜ã§ãŸã£ã·ã‚Šä½¿ãˆã¾ã™ã€‚",date:"2026.02.20"},
      {author:"ã²ãªãŸ",rating:5,text:"è‚Œè’ã‚Œã—ã‚„ã™ã„ç§ã§ã‚‚å•é¡Œãªãä½¿ãˆã¦ã„ã¾ã™ã€‚æœæ™©ä½¿ã£ã¦ã„ã¾ã™ãŒåˆºæ¿€ã‚¼ãƒ­ã€‚ãƒªãƒ”ç¢ºå®šã§ã™ï¼",date:"2026.02.15"},
      {author:"ã¿ãŠ",rating:4,text:"ã•ã£ã±ã‚Šã—ã¦ã„ã‚‹ã®ã«ä¿æ¹¿åŠ›ã¯ååˆ†ã€‚å¤ã§ã‚‚ä½¿ã„ã‚„ã™ã„ãƒ†ã‚¯ã‚¹ãƒãƒ£ãƒ¼ãŒå¥½ãã§ã™ã€‚",date:"2026.02.10"},
    ]},
  { id:2, name:"æ¥µæ½¤ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ’ã‚¢ãƒ«ãƒ­ãƒ³æ¶²", brand:"hada labo", category:"åŒ–ç²§æ°´", rating:4.6, reviews:241, emoji:"ğŸ’§", tags:["ãƒ’ã‚¢ãƒ«ãƒ­ãƒ³é…¸","ç„¡æ·»åŠ "],
    ratingDist:[130,70,28,9,4], ingredients:[{name:"ãƒ’ã‚¢ãƒ«ãƒ­ãƒ³é…¸Na",good:true},{name:"åŠ æ°´åˆ†è§£ãƒ’ã‚¢ãƒ«ãƒ­ãƒ³é…¸",good:true},{name:"ã‚°ãƒªã‚»ãƒªãƒ³",good:true},{name:"EDTA-2Na",good:false}],
    detailReviews:[
      {author:"ã¿ã",rating:4,text:"ã¨ã‚ã¿ãŒã‚ã£ã¦è‚Œã«å¯†ç€ã™ã‚‹æ„Ÿã˜ã€‚é¦™æ–™ä¸ä½¿ç”¨ã§å®‰å¿ƒã§ã™ã€‚ã‚‚ã†å°‘ã—ã•ã£ã±ã‚Šã ã¨å¬‰ã—ã„ã€‚",date:"2026.02.19"},
      {author:"ã‚†ã„",rating:5,text:"ä¹¾ç‡¥ãŒã²ã©ã„å†¬ã§ã‚‚ã“ã‚Œä¸€æœ¬ã§ã‹ãªã‚Šæ½¤ã„ã¾ã™ï¼æ•æ„Ÿè‚Œã®å‹äººã«ã‚‚è–¦ã‚ã¾ã—ãŸã€‚",date:"2026.02.05"},
    ]},
  { id:3, name:"ã‚»ãƒ©ãƒŸãƒ‰ä¿æ¹¿ã‚¯ãƒªãƒ¼ãƒ ", brand:"CeraVe", category:"ä¿æ¹¿ã‚¯ãƒªãƒ¼ãƒ ", rating:4.9, reviews:188, emoji:"ğŸ¶", tags:["ã‚»ãƒ©ãƒŸãƒ‰","åŒ»è–¬éƒ¨å¤–å“"],
    ratingDist:[160,20,5,2,1], ingredients:[{name:"ã‚»ãƒ©ãƒŸãƒ‰NP",good:true},{name:"ã‚»ãƒ©ãƒŸãƒ‰AP",good:true},{name:"ãƒ’ã‚¢ãƒ«ãƒ­ãƒ³é…¸Na",good:true},{name:"ãƒŠã‚¤ã‚¢ã‚·ãƒ³ã‚¢ãƒŸãƒ‰",good:true},{name:"ã‚«ãƒ«ãƒœãƒãƒ¼",good:false}],
    detailReviews:[
      {author:"ã‚†ã„",rating:5,text:"æµ·å¤–è£½å“ã§ã™ãŒæˆåˆ†è¡¨ç¤ºãŒã‚·ãƒ³ãƒ—ãƒ«ã§å®‰å¿ƒã€‚ãƒãƒªã‚¢æ©Ÿèƒ½ãŒç›®ã«è¦‹ãˆã¦æ”¹å–„ã€‚å†¬ã‚‚ä¹¾ç‡¥çŸ¥ã‚‰ãšã€‚",date:"2026.02.18"},
      {author:"ã‚Œã‚“",rating:5,text:"çš®è†šç§‘ã®å…ˆç”Ÿã«å‹§ã‚ã‚‰ã‚Œã¦è³¼å…¥ã€‚æœ¬å½“ã«è‚ŒãŒè½ã¡ç€ã„ã¦ãã¾ã—ãŸã€‚åŒ»è–¬éƒ¨å¤–å“ãªã®ã§å®‰å¿ƒæ„ŸãŒã‚ã‚Šã¾ã™ã€‚",date:"2026.02.12"},
    ]},
  { id:4, name:"æ•æ„Ÿè‚Œç”¨æ´—é¡”ãƒ•ã‚©ãƒ¼ãƒ ", brand:"FANCL", category:"æ´—é¡”", rating:4.7, reviews:204, emoji:"ğŸ«§", tags:["å¼±é…¸æ€§","ç„¡æ·»åŠ "],
    ratingDist:[140,45,12,5,2], ingredients:[{name:"ã‚¢ãƒŸãƒé…¸ç³»ç•Œé¢æ´»æ€§å‰¤",good:true},{name:"ã‚°ãƒªã‚»ãƒªãƒ³",good:true},{name:"ã‚¢ãƒ­ã‚¨ãƒ™ãƒ©",good:true},{name:"ãƒ•ã‚§ãƒã‚­ã‚·ã‚¨ã‚¿ãƒãƒ¼ãƒ«",good:false}],
    detailReviews:[
      {author:"ã‚ãŠã„",rating:5,text:"æ³¡ç«‹ã¡ãŒãã‚ç´°ã‹ãã¦æ´—ã„ä¸ŠãŒã‚Šã‚‚ã—ã£ã¨ã‚Šã€‚ä»Šã¾ã§ä½¿ã£ãŸæ´—é¡”ã®ä¸­ã§ä¸€ç•ªåˆºæ¿€ãŒå°‘ãªã„ã§ã™ã€‚",date:"2026.02.16"},
      {author:"ã“ã¨",rating:4,text:"ç„¡æ·»åŠ ã§ã“ã®æ´—æµ„åŠ›ã¯ã™ã”ã„ã€‚é‡ãŒå°‘ã—å°‘ãªã„æ°—ã‚‚ã™ã‚‹ã‘ã©ã‚³ã‚¹ãƒ‘ã¯è¨±å®¹ç¯„å›²ã€‚",date:"2026.02.08"},
    ]},
  { id:5, name:"ãƒŠã‚¤ã‚¢ã‚·ãƒ³ã‚¢ãƒŸãƒ‰ç¾å®¹æ¶² 10%", brand:"The Ordinary", category:"ç¾å®¹æ¶²", rating:4.5, reviews:156, emoji:"âœ¨", tags:["ãƒŠã‚¤ã‚¢ã‚·ãƒ³ã‚¢ãƒŸãƒ‰","ç¾ç™½"],
    ratingDist:[100,35,13,6,2], ingredients:[{name:"ãƒŠã‚¤ã‚¢ã‚·ãƒ³ã‚¢ãƒŸãƒ‰ 10%",good:true},{name:"äºœé‰› 1%",good:true},{name:"ãƒšãƒ³ãƒãƒ¬ãƒ³ã‚°ãƒªã‚³ãƒ¼ãƒ«",good:false},{name:"ã‚­ã‚µãƒ³ã‚¿ãƒ³ã‚¬ãƒ ",good:false}],
    detailReviews:[
      {author:"ã¯ã‚‹",rating:5,text:"æ¯›ç©´ãŒç›®ç«‹ãŸãªããªã‚Šã¾ã—ãŸï¼æœ€åˆã¯å°‘ã—ãƒ’ãƒªãƒ’ãƒªã—ã¾ã—ãŸãŒä»Šã¯å•é¡Œãªã—ã€‚ã‚³ã‚¹ãƒ‘æœ€å¼·ã€‚",date:"2026.02.17"},
      {author:"ãªãª",rating:4,text:"èµ¤ã¿ãŒå°‘ã—è½ã¡ç€ã„ã¦ããŸæ°—ãŒã—ã¾ã™ã€‚å³åŠ¹æ€§ã¯ãªã„ã‘ã©é•·æœŸä½¿ç”¨ã§åŠ¹æœã‚’å®Ÿæ„Ÿã€‚",date:"2026.02.03"},
    ]},
  { id:6, name:"ãƒãƒ³ã‚±ãƒŸã‚«ãƒ«æ—¥ç„¼ã‘æ­¢ã‚ SPF50", brand:"Biore UV", category:"æ—¥ç„¼ã‘æ­¢ã‚", rating:4.4, reviews:178, emoji:"â˜€ï¸", tags:["ãƒãƒ³ã‚±ãƒŸã‚«ãƒ«","æ•æ„Ÿè‚Œå‘ã‘"],
    ratingDist:[95,50,20,9,4], ingredients:[{name:"é…¸åŒ–äºœé‰›",good:true},{name:"é…¸åŒ–ãƒã‚¿ãƒ³",good:true},{name:"ã‚°ãƒªã‚»ãƒªãƒ³",good:true},{name:"ã‚¨ã‚¿ãƒãƒ¼ãƒ«",good:false}],
    detailReviews:[
      {author:"ã•ã‚„",rating:4,text:"åŒ–å­¦ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ä¸ä½¿ç”¨ãªã®ã§æ•æ„Ÿè‚Œã§ã‚‚å®‰å¿ƒã€‚ãŸã ç™½æµ®ããŒå°‘ã—æ°—ã«ãªã‚‹ã‹ã‚‚ã€‚",date:"2026.02.14"},
      {author:"ã¾ã„",rating:5,text:"å­ä¾›ã«ã‚‚ä½¿ãˆã‚‹ãã‚‰ã„å„ªã—ã„å‡¦æ–¹ã€‚SPF50ãªã®ã«è»½ãã¦ä½¿ã„ã‚„ã™ã„ã§ã™ã€‚",date:"2026.01.28"},
    ]},
  { id:7, name:"ã‚»ãƒ³ã‚·ãƒ†ã‚£ãƒ–ãƒ¢ã‚¤ã‚¹ãƒãƒ£ãƒ¼ãƒ©ã‚¤ã‚¶ãƒ¼", brand:"Aveeno", category:"ä¿æ¹¿ã‚¯ãƒªãƒ¼ãƒ ", rating:4.6, reviews:134, emoji:"ğŸŒ¿", tags:["å¤©ç„¶æˆåˆ†","ç„¡é¦™æ–™"],
    ratingDist:[90,30,10,3,1], ingredients:[{name:"ã‚³ãƒ­ã‚¤ãƒ‰ã‚ªãƒ¼ãƒˆãƒŸãƒ¼ãƒ«",good:true},{name:"ã‚°ãƒªã‚»ãƒªãƒ³",good:true},{name:"ãƒ‘ãƒ³ãƒˆãƒ†ãƒ³é…¸",good:true},{name:"ã‚¸ãƒ¡ãƒã‚³ãƒ³",good:false}],
    detailReviews:[
      {author:"ã¤ã",rating:5,text:"ã‚¢ãƒˆãƒ”ãƒ¼æ°—å‘³ã®è‚Œã§ã‚‚ä½¿ãˆã¾ã—ãŸã€‚ãƒ™ã‚¿ã¤ã‹ãªã„ã®ã«ã—ã£ã‹ã‚Šä¿æ¹¿ã•ã‚Œã¾ã™ã€‚",date:"2026.02.11"},
    ]},
  { id:8, name:"ã‚¢ãƒŸãƒé…¸æ´—é¡”ã‚¯ãƒªãƒ¼ãƒ ", brand:"Kiehl's", category:"æ´—é¡”", rating:4.3, reviews:98, emoji:"ğŸŒ¸", tags:["ã‚¢ãƒŸãƒé…¸","ä½åˆºæ¿€"],
    ratingDist:[55,25,12,4,2], ingredients:[{name:"ã‚¢ãƒŸãƒé…¸ç³»ç•Œé¢æ´»æ€§å‰¤",good:true},{name:"ã‚¢ãƒ­ã‚¨ãƒ™ãƒ©",good:true},{name:"ã‚«ãƒªã‚¦ãƒ PCA",good:true},{name:"é¦™æ–™",good:false}],
    detailReviews:[
      {author:"ã‚Šã‚“",rating:4,text:"é¦™ã‚ŠãŒå°‘ã—ã™ã‚‹ã®ã§100ç‚¹ã§ã¯ãªã„ã‘ã©ã€æ´—ã„ä¸ŠãŒã‚Šã®ã—ã£ã¨ã‚Šæ„Ÿã¯æ ¼åˆ¥ã€‚ãƒªãƒƒãƒãªæ°—åˆ†ã«ãªã‚Œã¾ã™ã€‚",date:"2026.02.09"},
    ]},
];

const dummyArticles = [
  { id:1, title:"æ•æ„Ÿè‚ŒãŒé¿ã‘ã‚‹ã¹ãæˆåˆ†10é¸ â€” çŸ¥ã‚‰ãªã„ã¨æ€–ã„åŒ–ç²§å“ã®è½ã¨ã—ç©´", tag:"æˆåˆ†ã‚¬ã‚¤ãƒ‰", date:"2026.02.22", emoji:"ğŸ”¬", featured:true,
    author:"HADAERUç·¨é›†éƒ¨", readTime:5,
    body:`<h3>ãªãœæˆåˆ†ãƒã‚§ãƒƒã‚¯ãŒé‡è¦ãªã®ã‹</h3>
<p>æ•æ„Ÿè‚Œã®æ–¹ã«ã¨ã£ã¦ã€åŒ–ç²§å“ã®æˆåˆ†é¸ã³ã¯è‚Œãƒˆãƒ©ãƒ–ãƒ«ã‚’é˜²ãã†ãˆã§æœ€ã‚‚é‡è¦ãªã‚¹ãƒ†ãƒƒãƒ—ã§ã™ã€‚ã€Œã‚ˆã‹ã‚Œã¨æ€ã£ã¦ä½¿ã£ãŸã€ã‚±ã‚¢ç”¨å“ãŒã€é€†ã«ç‚ç—‡ã‚„ä¹¾ç‡¥ã®åŸå› ã«ãªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</p>
<div class="highlight-box"><p>ğŸ’¡ æˆåˆ†è¡¨ç¤ºã¯å«æœ‰é‡ã®å¤šã„é †ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚æœ€åˆã®5æˆåˆ†ãŒè£½å“ã®80ã€œ90%ã‚’å ã‚ã‚‹ã“ã¨ã‚’å¿µé ­ã«ç½®ãã¾ã—ã‚‡ã†ã€‚</p></div>
<h3>é¿ã‘ã‚‹ã¹ãæˆåˆ† TOP5</h3>
<ul>
<li><strong>åˆæˆé¦™æ–™ï¼ˆParfum / Fragranceï¼‰</strong> â€” ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ã®åŸå› No.1ã€‚ã€Œç„¡é¦™æ–™ã€è¡¨ç¤ºã‚’é¸ã³ã¾ã—ã‚‡ã†ã€‚</li>
<li><strong>ã‚¨ã‚¿ãƒãƒ¼ãƒ«ï¼ˆã‚¢ãƒ«ã‚³ãƒ¼ãƒ«ï¼‰</strong> â€” æ®ç™ºæ™‚ã«è‚Œã®æ°´åˆ†ã‚’å¥ªã„ã€ãƒãƒªã‚¢æ©Ÿèƒ½ã‚’ä½ä¸‹ã•ã›ã¾ã™ã€‚</li>
<li><strong>ç¡«é…¸å¡©ç³»ç•Œé¢æ´»æ€§å‰¤ï¼ˆSLSãƒ»SLESï¼‰</strong> â€” æ´—æµ„åŠ›ãŒå¼·ã™ãã¦ã€å¿…è¦ãªçš®è„‚ã¾ã§é™¤å»ã—ã¦ã—ã¾ã„ã¾ã™ã€‚</li>
<li><strong>ãƒ‘ãƒ©ãƒ™ãƒ³é¡</strong> â€” é˜²è…å‰¤ã¨ã—ã¦åºƒãä½¿ã‚ã‚Œã¾ã™ãŒã€æ¥è§¦æ€§çš®è†šç‚ã®åŸå› ã«ãªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</li>
<li><strong>é‰±ç‰©æ²¹ï¼ˆMineral Oilï¼‰</strong> â€” æ¯›ç©´ã‚’å¡ãã‚„ã™ãã€ãƒ‹ã‚­ãƒ“è‚Œã¨æ•æ„Ÿè‚Œã®çµ„ã¿åˆã‚ã›ã«ã¯æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚</li>
</ul>
<h3>ä»£ã‚ã‚Šã«é¸ã³ãŸã„æˆåˆ†</h3>
<p>é¿ã‘ã‚‹ã ã‘ã§ãªãã€ç©æ¥µçš„ã«å–ã‚Šå…¥ã‚ŒãŸã„æˆåˆ†ã‚‚çŸ¥ã£ã¦ãŠãã¨é¸æŠã®å¹…ãŒåºƒãŒã‚Šã¾ã™ã€‚ã‚»ãƒ©ãƒŸãƒ‰ãƒ»ãƒ’ã‚¢ãƒ«ãƒ­ãƒ³é…¸ãƒ»ã‚°ãƒªã‚»ãƒªãƒ³ãƒ»ãƒŠã‚¤ã‚¢ã‚·ãƒ³ã‚¢ãƒŸãƒ‰ã¯æ•æ„Ÿè‚Œã¨ã®ç›¸æ€§ãŒè‰¯ã„ã“ã¨ãŒçŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚</p>
<p>æ¬¡å›ã®ãŠè²·ã„ç‰©ã§ã¯ã€ãœã²æˆåˆ†è¡¨ã®æœ€åˆã®5ã€œ10æˆåˆ†ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã¿ã¦ãã ã•ã„ã€‚ãã‚Œã ã‘ã§ã€è‚Œã«åˆã‚ãªã„ã‚¢ã‚¤ãƒ†ãƒ ã®å¤§åŠã‚’äº‹å‰ã«è¦‹åˆ†ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>`,
    comments:[
      {author:"ã•ãã‚‰",text:"ã“ã‚Œèª­ã‚“ã§ã‹ã‚‰æˆåˆ†ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸï¼é¦™æ–™å…¥ã‚Šã‚’é¿ã‘ãŸã‚‰èµ¤ã¿ãŒæ¸›ã‚Šã¾ã—ãŸã€‚",date:"2026.02.23"},
      {author:"ã¿ã",text:"SLSã£ã¦çŸ¥ã‚‰ãªã‹ã£ãŸâ€¦æ´—é¡”æ–™ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è¦‹ç›´ã—ã¦ã¿ã¾ã™ã€‚",date:"2026.02.24"},
    ]},
  { id:2, title:"ã‚»ãƒ©ãƒŸãƒ‰ã¨ã¯ï¼Ÿæ•æ„Ÿè‚Œã®ãƒãƒªã‚¢æ©Ÿèƒ½ã‚’å®ˆã‚‹ä»•çµ„ã¿ã‚’è§£èª¬", tag:"åŸºç¤çŸ¥è­˜", date:"2026.02.20", emoji:"ğŸ§¬", featured:false,
    author:"HADAERUç·¨é›†éƒ¨", readTime:4,
    body:`<h3>ã‚»ãƒ©ãƒŸãƒ‰ã®å½¹å‰²ã¨ã¯</h3>
<p>ã‚»ãƒ©ãƒŸãƒ‰ã¯çš®è†šã®è§’è³ªå±¤ã«å­˜åœ¨ã™ã‚‹è„‚è³ªã§ã€è‚Œç´°èƒã¨ç´°èƒã‚’ã¤ãªãã€Œãƒ¢ãƒ«ã‚¿ãƒ«ã€ã®ã‚ˆã†ãªå½¹å‰²ã‚’æ‹…ã£ã¦ã„ã¾ã™ã€‚ã“ã®æˆåˆ†ãŒè±Šå¯Œã ã¨å¤–éƒ¨åˆºæ¿€ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ã€å†…éƒ¨ã®æ°´åˆ†ã‚’ã‚­ãƒ¼ãƒ—ã—ã¦ãã‚Œã¾ã™ã€‚</p>
<div class="highlight-box"><p>ğŸ”¬ å¥åº·ãªè‚Œã®ã‚»ãƒ©ãƒŸãƒ‰å«æœ‰é‡ã¯ç´„40ã€œ50%ã€‚æ•æ„Ÿè‚Œã®æ–¹ã¯ã“ã®æ•°å€¤ãŒä½ã„å‚¾å‘ã«ã‚ã‚Šã¾ã™ã€‚</p></div>
<h3>ã‚»ãƒ©ãƒŸãƒ‰ã®ç¨®é¡ã¨é¸ã³æ–¹</h3>
<p>ã‚»ãƒ©ãƒŸãƒ‰ã«ã¯è¤‡æ•°ã®ç¨®é¡ãŒã‚ã‚Šã€ãã‚Œãã‚Œç•°ãªã‚‹å½¹å‰²ã‚’æŒã¡ã¾ã™ã€‚åŒ–ç²§å“ã«å«ã¾ã‚Œã‚‹ä¸»ãªã‚‚ã®ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚</p>
<ul>
<li><strong>ã‚»ãƒ©ãƒŸãƒ‰NPï¼ˆã‚»ãƒ©ãƒŸãƒ‰3ï¼‰</strong> â€” æœ€ã‚‚ä¸€èˆ¬çš„ã€‚ä¿æ¹¿åŠ›ã«å„ªã‚Œã¦ã„ã¾ã™ã€‚</li>
<li><strong>ã‚»ãƒ©ãƒŸãƒ‰APï¼ˆã‚»ãƒ©ãƒŸãƒ‰6IIï¼‰</strong> â€” ã‚¿ãƒ¼ãƒ³ã‚ªãƒ¼ãƒãƒ¼ã‚’ã‚µãƒãƒ¼ãƒˆã—ã€è‚Œã®ã‚­ãƒ¡ã‚’æ•´ãˆã¾ã™ã€‚</li>
<li><strong>ã‚»ãƒ©ãƒŸãƒ‰EOPï¼ˆã‚»ãƒ©ãƒŸãƒ‰1ï¼‰</strong> â€” ãƒãƒªã‚¢æ©Ÿèƒ½ã®ç¶­æŒã«ç‰¹ã«é‡è¦ãªæˆåˆ†ã§ã™ã€‚</li>
</ul>
<h3>ã©ã‚“ãªè£½å“ã«å…¥ã£ã¦ã„ã‚‹ï¼Ÿ</h3>
<p>ã‚»ãƒ©ãƒŸãƒ‰é…åˆã®è£½å“ã‚’é¸ã¶éš›ã¯ã€æˆåˆ†è¡¨ç¤ºã§ã€Œã‚»ãƒ©ãƒŸãƒ‰NPã€ã€Œã‚»ãƒ©ãƒŸãƒ‰APã€ã€Œã‚»ãƒ©ãƒŸãƒ‰EOPã€ãªã©ã®è¨˜è¼‰ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚ã€Œã‚»ãƒ©ãƒŸãƒ‰æ§˜æˆåˆ†ã€ã‚„ã€Œæ“¬ä¼¼ã‚»ãƒ©ãƒŸãƒ‰ã€ã¯æ§‹é€ ãŒç•°ãªã‚‹ãŸã‚ã€åŠ¹æœã«ã‚‚é•ã„ãŒã‚ã‚Šã¾ã™ã€‚</p>`,
    comments:[
      {author:"ã‚†ã„",text:"ç¨®é¡ãŒã‚ã‚‹ã£ã¦çŸ¥ã‚Šã¾ã›ã‚“ã§ã—ãŸï¼è£½å“ã«è¤‡æ•°å…¥ã£ã¦ãŸã»ã†ãŒã„ã„ã‚“ã§ã™ã­ã€‚",date:"2026.02.21"},
    ]},
  { id:3, title:"æ˜¥ã®èŠ±ç²‰ã‚·ãƒ¼ã‚ºãƒ³ã«å‚™ãˆã‚‹ï¼æ•æ„Ÿè‚Œã®ãŸã‚ã®å­£ç¯€ã‚±ã‚¢", tag:"å­£ç¯€ã‚±ã‚¢", date:"2026.02.18", emoji:"ğŸŒ¸", featured:false,
    author:"HADAERUç·¨é›†éƒ¨", readTime:3,
    body:`<h3>èŠ±ç²‰ã¨æ•æ„Ÿè‚Œã®é–¢ä¿‚</h3>
<p>æ˜¥ã«ãªã‚‹ã¨èŠ±ç²‰ãŒè‚Œã«ä»˜ç€ã—ã€ãƒãƒªã‚¢æ©Ÿèƒ½ãŒä½ä¸‹ã—ã¦ã„ã‚‹æ•æ„Ÿè‚Œã§ã¯ç‚ç—‡åå¿œãŒèµ·ãã‚„ã™ããªã‚Šã¾ã™ã€‚ç›®å…ƒãƒ»å£å…ƒãƒ»é¦–å…ƒã«èµ¤ã¿ã‚„ã‹ã‚†ã¿ãŒå‡ºã‚‹ã®ã¯ã“ã®ãŸã‚ã§ã™ã€‚</p>
<div class="highlight-box"><p>ğŸŒ¿ èŠ±ç²‰ã‚·ãƒ¼ã‚ºãƒ³å‰ã®2ã€œ3é€±é–“ã‹ã‚‰ãƒãƒªã‚¢ã‚±ã‚¢ã‚’å¼·åŒ–ã—ã¦ãŠãã¨ã€ã‚·ãƒ¼ã‚ºãƒ³ä¸­ã®è‚Œãƒˆãƒ©ãƒ–ãƒ«ã‚’å¤§å¹…ã«æ¸›ã‚‰ã›ã¾ã™ã€‚</p></div>
<h3>æ˜¥ã®ã‚¹ã‚­ãƒ³ã‚±ã‚¢3ã‹æ¡</h3>
<ul>
<li><strong>æ´—é¡”ã‚’ä¸å¯§ã«</strong> â€” å¸°å®…å¾Œã¯èŠ±ç²‰ã‚’æ®‹ã•ãªã„ã‚ˆã†ã€ã¬ã‚‹ã¾æ¹¯ã§ã—ã£ã‹ã‚Šã™ã™ãã¾ã™ã€‚</li>
<li><strong>ä¿æ¹¿ã‚’å¢—ã‚„ã™</strong> â€” ã‚»ãƒ©ãƒŸãƒ‰ãƒ»ãƒ’ã‚¢ãƒ«ãƒ­ãƒ³é…¸é…åˆã®åŒ–ç²§æ°´ã‚’é‡ã­ã¦ã€ãƒãƒªã‚¢ã‚’è£œå¼·ã€‚</li>
<li><strong>æ‘©æ“¦ã‚’é¿ã‘ã‚‹</strong> â€” ã‚¿ã‚ªãƒ«ã§ã‚´ã‚·ã‚´ã‚·ã›ãšã€æŠ¼ã•ãˆã‚‹ã‚ˆã†ã«ã‚„ã•ã—ãæ°´åˆ†ã‚’å–ã‚Šã¾ã—ã‚‡ã†ã€‚</li>
</ul>
<p>æ˜¥ã¯æ¥½ã—ã„å­£ç¯€ã§ã™ãŒã€æ•æ„Ÿè‚Œã«ã¯è©¦ç·´ã®æ™‚æœŸã§ã‚‚ã‚ã‚Šã¾ã™ã€‚æ—©ã‚ã®å¯¾ç­–ã§å¿«é©ã«éã”ã—ã¾ã—ã‚‡ã†ï¼</p>`,
    comments:[]},
];

const dummyFaq = [
  { q:"æ•æ„Ÿè‚Œã‹ã©ã†ã‹åˆ¤æ–­ã™ã‚‹æ–¹æ³•ã¯ï¼Ÿ", a:"æ´—é¡”å¾Œ15ã€œ20åˆ†å¾Œã«èµ¤ã¿ã‚„ã‹ã‚†ã¿ã€çªã£å¼µã‚Šæ„ŸãŒå‡ºã‚‹å ´åˆã¯æ•æ„Ÿè‚Œã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚è‡ªå·±åˆ¤æ–­ãŒé›£ã—ã„å ´åˆã¯çš®è†šç§‘ã‚’å—è¨ºã•ã‚Œã‚‹ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚" },
  { q:"åŒ–ç²§æ°´ã¨ä¹³æ¶²ã¯ã©ã¡ã‚‰ã‚’å…ˆã«ä½¿ã†ã¹ãï¼Ÿ", a:"åŸºæœ¬çš„ã«ã¯åŒ–ç²§æ°´ï¼ˆæ°´åˆ†è£œçµ¦ï¼‰â†’ä¹³æ¶²ï¼ˆæ²¹åˆ†ã§è“‹ã‚’ã™ã‚‹ï¼‰ã®é †ç•ªã§ã™ã€‚æ•æ„Ÿè‚Œã®å ´åˆã¯å°‘ãªã„å·¥ç¨‹ã§ã‚·ãƒ³ãƒ—ãƒ«ã«ã¾ã¨ã‚ã‚‹ã“ã¨ã‚‚å¤§åˆ‡ã§ã™ã€‚" },
  { q:"ã‚¹ã‚­ãƒ³ã‚±ã‚¢ã§ã€Œç„¡æ·»åŠ ã€ã¨æ›¸ã‹ã‚Œã¦ã„ã‚Œã°å®‰å…¨ã§ã™ã‹ï¼Ÿ", a:"ã€Œç„¡æ·»åŠ ã€ã®å®šç¾©ã¯æ³•å¾‹ã§æ±ºã¾ã£ã¦ã„ãªã„ãŸã‚ã€ãƒ¡ãƒ¼ã‚«ãƒ¼ã«ã‚ˆã‚Šç•°ãªã‚Šã¾ã™ã€‚æˆåˆ†è¡¨ã‚’ç¢ºèªã—ã€ã‚¢ãƒ¬ãƒ«ã‚²ãƒ³ã¨ãªã‚Šã‚„ã™ã„é¦™æ–™ãƒ»ç€è‰²æ–™ãƒ»é˜²è…å‰¤ã®æœ‰ç„¡ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã—ã‚‡ã†ã€‚" },
  { q:"ãƒ‘ãƒƒãƒãƒ†ã‚¹ãƒˆã®ã‚„ã‚Šæ–¹ã‚’æ•™ãˆã¦ãã ã•ã„", a:"äºŒã®è…•ã®å†…å´ã«å°‘é‡ã‚’å¡—å¸ƒã—ã€24ã€œ48æ™‚é–“æ§˜å­ã‚’è¦‹ã¾ã™ã€‚èµ¤ã¿ãƒ»ã‹ã‚†ã¿ãƒ»è…«ã‚ŒãŒãªã‘ã‚Œã°é¡”ã¸ã®ä½¿ç”¨ã«é€²ã‚“ã§ãã ã•ã„ã€‚å¿…ãšæ´—ã„æµã›ã‚‹çŠ¶æ…‹ã§è¡Œã„ã¾ã—ã‚‡ã†ã€‚" },
  { q:"æ´—é¡”ã®ã—ã™ããŒæ•æ„Ÿè‚Œã®åŸå› ã«ãªã‚Šã¾ã™ã‹ï¼Ÿ", a:"ã¯ã„ã€ãªã‚Šã¾ã™ã€‚éåº¦ãªæ´—é¡”ã¯çš®è†šã®å¸¸åœ¨èŒã‚„å¿…è¦ãªçš®è„‚ã‚’é™¤å»ã—ã€ãƒãƒªã‚¢æ©Ÿèƒ½ã‚’ä½ä¸‹ã•ã›ã¾ã™ã€‚æœã¯ã¬ã‚‹ã¾æ¹¯æ´—é¡”ã®ã¿ã«ã™ã‚‹æ–¹æ³•ã‚‚æœ‰åŠ¹ã§ã™ã€‚" },
  { q:"å£ã‚³ãƒŸã‚„ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯ã©ã“ã§ä¿¡é ¼ã§ãã‚‹æƒ…å ±ã‚’å¾—ã‚‰ã‚Œã¾ã™ã‹ï¼Ÿ", a:"å½“ã‚µã‚¤ãƒˆHADAERUã§ã¯å®Ÿéš›ã®æ•æ„Ÿè‚Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚¢ãƒ«ãªä½¿ç”¨æ„Ÿã‚’æŠ•ç¨¿ã—ã¦ã„ãŸã ã„ã¦ã„ã¾ã™ã€‚è‚Œã‚¿ã‚¤ãƒ—ã‚’æ˜è¨˜ã—ãŸãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å‚è€ƒã«ã™ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šè‡ªåˆ†ã«åˆã£ãŸæƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã™ã€‚" },
];

// Search data pool
const searchData = [
  ...dummyProducts.map(p => ({ label:p.name, sub:p.brand, type:'product' })),
  { label:'hada labo', sub:'ãƒ–ãƒ©ãƒ³ãƒ‰', type:'brand' },
  { label:'CeraVe', sub:'ãƒ–ãƒ©ãƒ³ãƒ‰', type:'brand' },
  { label:'FANCL', sub:'ãƒ–ãƒ©ãƒ³ãƒ‰', type:'brand' },
  { label:'The Ordinary', sub:'ãƒ–ãƒ©ãƒ³ãƒ‰', type:'brand' },
  ...dummyArticles.map(a => ({ label:a.title.substring(0,30)+'...', sub:a.tag, type:'article' })),
];

// ===================== STATE =====================
let currentUser = null;
let currentRating = 0;
let allReviews = [...dummyReviews];

// ===================== RENDER =====================
function renderReviews(reviews) {
  const grid = document.getElementById('reviewsGrid');
  grid.innerHTML = reviews.map(r => `
    <div class="review-card fade-in">
      <div class="review-card-img">${r.emoji || 'ğŸŒ¸'}</div>
      <div class="review-card-body">
        <p class="review-product-name">${r.brand}</p>
        <h3>${r.product}</h3>
        <div class="stars">${'â˜…'.repeat(r.rating)}${'â˜†'.repeat(5-r.rating)}</div>
        <p class="review-text">${r.text}</p>
        <div class="review-footer">
          <div class="avatar">${r.author[0]}</div>
          <span class="reviewer-name">${r.author}</span>
          <span class="review-date">${r.date}</span>
        </div>
      </div>
    </div>
  `).join('');
  observeAll();
}

function renderProducts(products) {
  const grid = document.getElementById('productsGrid');
  grid.innerHTML = products.map(p => `
    <div class="product-card fade-in" onclick="openProductDetail(${p.id})">
      <div class="product-img">${p.emoji}</div>
      <div class="product-body">
        <p class="product-brand">${p.brand}</p>
        <h4>${p.name}</h4>
        <div class="product-rating">
          <span class="stars">${'â˜…'.repeat(Math.round(p.rating))}${'â˜†'.repeat(5-Math.round(p.rating))}</span>
          <span class="score">${p.rating}</span>
          <span class="count">(${p.reviews}ä»¶)</span>
        </div>
        <div class="product-tags">
          <span class="product-tag">${p.category}</span>
          ${p.tags.map(t=>`<span class="product-tag">${t}</span>`).join('')}
        </div>
        <p style="font-size:0.72rem;color:var(--dusty-rose);margin-top:0.6rem;letter-spacing:0.05em">è©³ç´°ã‚’è¦‹ã‚‹ â†’</p>
      </div>
    </div>
  `).join('');
  observeAll();
}

function openProductDetail(id) {
  const p = dummyProducts.find(p => p.id === id);
  if (!p) return;

  document.getElementById('detailEmoji').textContent = p.emoji;
  document.getElementById('detailBrand').textContent = p.brand;
  document.getElementById('detailName').textContent = p.name;
  document.getElementById('detailStars').textContent = 'â˜…'.repeat(Math.round(p.rating)) + 'â˜†'.repeat(5-Math.round(p.rating));
  document.getElementById('detailScore').textContent = p.rating;
  document.getElementById('detailCount').textContent = `(${p.reviews}ä»¶ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼)`;
  document.getElementById('detailTags').innerHTML = p.tags.map(t=>`<span class="product-tag">${t}</span>`).join('');

  // Rating bars
  const total = p.ratingDist.reduce((a,b)=>a+b,0);
  document.getElementById('ratingBars').innerHTML = [5,4,3,2,1].map((star,i) => {
    const count = p.ratingDist[i];
    const pct = total > 0 ? Math.round(count/total*100) : 0;
    return `<div class="rating-bar-row">
      <span class="rating-bar-label">${star}â˜…</span>
      <div class="rating-bar-track"><div class="rating-bar-fill" style="width:${pct}%"></div></div>
      <span class="rating-bar-count">${count}</span>
    </div>`;
  }).join('');

  // Ingredients
  document.getElementById('detailIngredients').innerHTML = p.ingredients.map(ing =>
    `<span class="ing-badge ${ing.good?'good':'neutral'}">${ing.good?'âœ“ ':''}${ing.name}</span>`
  ).join('');

  // Reviews
  const reviews = p.detailReviews || [];
  document.getElementById('detailReviewsList').innerHTML = reviews.length ? reviews.map(r => `
    <div class="detail-review-item">
      <div class="detail-review-top">
        <div class="avatar">${r.author[0]}</div>
        <span class="name">${r.author}</span>
        <span class="stars">${'â˜…'.repeat(r.rating)}${'â˜†'.repeat(5-r.rating)}</span>
        <span class="date">${r.date}</span>
      </div>
      <p class="detail-review-text">${r.text}</p>
    </div>
  `).join('') : '<p style="font-size:0.85rem;color:var(--mid-gray);text-align:center;padding:1.5rem 0">ã¾ã ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒã‚ã‚Šã¾ã›ã‚“ã€‚æœ€åˆã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ›¸ãã¾ã—ã‚‡ã†ï¼</p>';

  openModal('productDetailModal');
}

function renderArticles() {
  const grid = document.getElementById('articlesGrid');
  grid.innerHTML = dummyArticles.map((a,i) => `
    <div class="article-card ${a.featured?'featured':''} fade-in" style="transition-delay:${i*0.1}s;cursor:pointer" onclick="openArticleDetail(${a.id})">
      <div class="article-img">${a.emoji}</div>
      <div class="article-body">
        <p class="article-tag">${a.tag}</p>
        <h3>${a.title}</h3>
        <p class="article-meta">${a.date}${a.readTime ? ' Â· èª­äº† ç´„'+a.readTime+'åˆ†' : ''}</p>
      </div>
    </div>
  `).join('');
  observeAll();
}

function openArticleDetail(id) {
  const a = dummyArticles.find(a => a.id === id);
  if (!a) return;

  document.getElementById('adTag').textContent = a.tag;
  document.getElementById('adTitle').textContent = a.title;
  document.getElementById('adDate').textContent = a.date;
  document.getElementById('adReadTime').textContent = a.readTime ? 'èª­äº† ç´„'+a.readTime+'åˆ†' : '';
  const authorName = a.author || 'HADAERUç·¨é›†éƒ¨';
  document.getElementById('adAuthor').textContent = authorName;
  document.getElementById('adAuthorAvatar').textContent = authorName[0];
  document.getElementById('adContent').innerHTML = a.body || '<p style="color:var(--mid-gray)">æœ¬æ–‡ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>';

  // Comments
  const comments = a.comments || [];
  renderArticleComments(comments, a.id);

  openModal('articleDetailModal');
  // Store current article id for comment posting
  document.getElementById('articleDetailModal').dataset.articleId = id;
}

function renderArticleComments(comments, articleId) {
  document.getElementById('adCommentTitle').textContent = `ğŸ’¬ ã‚³ãƒ¡ãƒ³ãƒˆ (${comments.length})`;
  document.getElementById('adCommentsList').innerHTML = comments.length ? comments.map(c => `
    <div class="comment-item">
      <div class="avatar" style="width:32px;height:32px;font-size:0.8rem;flex-shrink:0">${c.author[0]}</div>
      <div class="comment-body">
        <div class="comment-header">
          <span class="comment-name">${c.author}</span>
          <span class="comment-date">${c.date}</span>
        </div>
        <p class="comment-text">${c.text}</p>
      </div>
    </div>
  `).join('') : '<p style="font-size:0.83rem;color:var(--mid-gray);padding:0.5rem 0">ã¾ã ã‚³ãƒ¡ãƒ³ãƒˆãŒã‚ã‚Šã¾ã›ã‚“ã€‚æœ€åˆã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ›¸ã„ã¦ã¿ã¾ã—ã‚‡ã†ï¼</p>';
}

function postArticleComment() {
  if (!currentUser) { showToast('âš ï¸ ã‚³ãƒ¡ãƒ³ãƒˆã«ã¯ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™', 'error'); return; }
  const text = document.getElementById('adCommentInput').value.trim();
  if (!text) { showToast('âš ï¸ ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error'); return; }

  const id = parseInt(document.getElementById('articleDetailModal').dataset.articleId);
  const article = dummyArticles.find(a => a.id === id);
  if (!article) return;
  if (!article.comments) article.comments = [];

  const newComment = {
    author: currentUser.name,
    text,
    date: new Date().toLocaleDateString('ja-JP',{year:'numeric',month:'2-digit',day:'2-digit'}).replace(/\//g,'.')
  };
  article.comments.push(newComment);
  renderArticleComments(article.comments, id);
  document.getElementById('adCommentInput').value = '';
  showToast('ğŸ’¬ ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ã—ã¾ã—ãŸï¼', 'success');
}

function renderFaq() {
  const grid = document.getElementById('faqGrid');
  grid.innerHTML = dummyFaq.map((f,i) => `
    <div class="faq-item fade-in" style="transition-delay:${i*0.07}s">
      <div class="faq-q" onclick="toggleFaq(this)">
        <span class="faq-q-text">Q. ${f.q}</span>
        <span class="faq-toggle">ï¼‹</span>
      </div>
      <div class="faq-a">A. ${f.a}</div>
    </div>
  `).join('');
  observeAll();
}

function toggleFaq(el) {
  el.parentElement.classList.toggle('open');
}

function filterProducts(category, btn) {
  document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
  btn.classList.add('active');
  const filtered = category === 'all' ? dummyProducts : dummyProducts.filter(p => p.category === category);
  renderProducts(filtered);
}

// ===================== SEARCH =====================
const searchInput = document.getElementById('searchInput');
const searchDropdown = document.getElementById('searchDropdown');

searchInput.addEventListener('input', function() {
  const q = this.value.trim().toLowerCase();
  if (!q) { searchDropdown.classList.remove('show'); return; }
  const results = searchData.filter(d =>
    d.label.toLowerCase().includes(q) || d.sub.toLowerCase().includes(q)
  ).slice(0, 6);
  if (!results.length) { searchDropdown.classList.remove('show'); return; }
  const typeLabel = { product:'å•†å“', brand:'ãƒ–ãƒ©ãƒ³ãƒ‰', article:'è¨˜äº‹' };
  const typeClass = { product:'type-product', brand:'type-brand', article:'type-article' };
  searchDropdown.innerHTML = results.map(r => `
    <div class="search-result-item" onclick="selectSearch('${r.label.replace(/'/g,"\\'")}')">
      <span class="result-type ${typeClass[r.type]}">${typeLabel[r.type]}</span>
      <span>${r.label}</span>
      <small style="color:#bbb;margin-left:auto">${r.sub}</small>
    </div>
  `).join('');
  searchDropdown.classList.add('show');
});

document.addEventListener('click', e => {
  if (!e.target.closest('.nav-search')) searchDropdown.classList.remove('show');
});

function selectSearch(label) {
  searchInput.value = label;
  searchDropdown.classList.remove('show');
  showToast('ğŸ” ã€Œ'+label+'ã€ã‚’æ¤œç´¢ã—ã¾ã—ãŸ', 'success');
}

// ===================== AUTH (SUPABASE) =====================
async function handleLogin() {
  const email = document.getElementById('loginEmail').value.trim();
  const pw = document.getElementById('loginPassword').value;
  if (!email || !pw) { showToast('âš ï¸ ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error'); return; }
  showToast('â³ ãƒ­ã‚°ã‚¤ãƒ³ä¸­...', 'success');
  const { data, error } = await sb.auth.signInWithPassword({ email, password: pw });
  if (error) { showToast('âš ï¸ ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™', 'error'); return; }
  await loadUserProfile(data.user);
  closeModal('loginModal');
  showToast('ğŸŒ¸ ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã—ãŸï¼ã‚ˆã†ã“ã', 'success');
}

async function handleRegister() {
  const name = document.getElementById('regName').value.trim();
  const email = document.getElementById('regEmail').value.trim();
  const skin = document.getElementById('regSkinType').value;
  const pw = document.getElementById('regPassword').value;
  if (!name || !email || !skin || !pw) { showToast('âš ï¸ ã™ã¹ã¦ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error'); return; }
  if (pw.length < 8) { showToast('âš ï¸ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯8æ–‡å­—ä»¥ä¸Šã§è¨­å®šã—ã¦ãã ã•ã„', 'error'); return; }
  showToast('â³ ç™»éŒ²ä¸­...', 'success');
  const { data, error } = await sb.auth.signUp({ email, password: pw });
  if (error) { showToast('âš ï¸ ' + error.message, 'error'); return; }
  if (data.user) {
    await sb.from('profiles').upsert({ id: data.user.id, name, skin_type: skin });
    await loadUserProfile(data.user);
  }
  closeModal('registerModal');
  showToast('ğŸ‰ ç™»éŒ²å®Œäº†ï¼HADAERUã¸ã‚ˆã†ã“ãã€' + name + 'ã•ã‚“', 'success');
}

async function loadUserProfile(user) {
  const { data: profile } = await sb.from('profiles').select('*').eq('id', user.id).single();
  const name = profile?.name || user.email.split('@')[0];
  currentUser = { id: user.id, name, email: user.email, skin: profile?.skin_type };
  document.getElementById('userAvatarNav').textContent = name[0];
  document.getElementById('userNameNav').textContent = name + 'ã•ã‚“';
  document.getElementById('navAuthBtns').style.display = 'none';
  document.getElementById('userMenu').classList.add('show');
}

async function logout() {
  await sb.auth.signOut();
  currentUser = null;
  document.getElementById('navAuthBtns').style.display = 'flex';
  document.getElementById('userMenu').classList.remove('show');
  showToast('ã¾ãŸã­ï¼ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ', 'success');
}

sb.auth.getSession().then(async ({ data: { session } }) => {
  if (session?.user) await loadUserProfile(session.user);
});

function checkLoginForPost(type) {
  if (!currentUser) { openModal('loginModal'); return; }
  if (type === 'article') openModal('articleModal');
  else openModal('postModal');
}

function togglePostDropdown() {
  const d = document.getElementById('postDropdown');
  d.style.display = d.style.display === 'none' ? 'block' : 'none';
}
function closePostDropdown() {
  document.getElementById('postDropdown').style.display = 'none';
}
document.addEventListener('click', e => {
  if (!e.target.closest('.post-dropdown-wrap')) closePostDropdown();
});

// ===================== ARTICLE POST (SUPABASE) =====================
function previewArticleImage(input) {
  const preview = document.getElementById('articleImagePreview');
  if (!input.files[0]) return;
  const reader = new FileReader();
  reader.onload = e => {
    preview.innerHTML = `<img src="${e.target.result}" style="width:100%;max-height:160px;object-fit:cover;border-radius:10px;border:1px solid var(--light-border)">`;
  };
  reader.readAsDataURL(input.files[0]);
}

async function handleArticlePost() {
  if (!currentUser) { showToast('âš ï¸ ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™', 'error'); return; }
  const title = document.getElementById('articleTitle').value.trim();
  const category = document.getElementById('articleCategory').value;
  const body = document.getElementById('articleBody').value.trim();
  if (!title || !category || !body) { showToast('âš ï¸ ã‚¿ã‚¤ãƒˆãƒ«ãƒ»ã‚«ãƒ†ã‚´ãƒªãƒ»æœ¬æ–‡ã¯å¿…é ˆã§ã™', 'error'); return; }
  showToast('â³ æŠ•ç¨¿ä¸­...', 'success');
  const emojiMap = { 'æˆåˆ†ã‚¬ã‚¤ãƒ‰':'ğŸ”¬', 'ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ãƒ»ã‚±ã‚¢æ–¹æ³•':'ğŸŒ¿', 'å­£ç¯€ã‚±ã‚¢':'ğŸŒ¸', 'åŸºç¤çŸ¥è­˜':'ğŸ“–', 'ä½“é¨“è«‡ãƒ»ãƒ¬ãƒãƒ¼ãƒˆ':'âœ¨', 'ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ»å•†å“ç´¹ä»‹':'ğŸ›ï¸', 'Q&Aãƒ»æ‚©ã¿ç›¸è«‡':'ğŸ’¬' };
  const { data, error } = await sb.from('articles').insert({
    title, tag: category, body,
    emoji: emojiMap[category] || 'ğŸ“',
    author_id: currentUser.id
  }).select('id').single();
  if (error) { showToast('âš ï¸ æŠ•ç¨¿ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message, 'error'); return; }
  const newArticle = {
    id: data.id, title, tag: category, body,
    date: new Date().toLocaleDateString('ja-JP',{year:'numeric',month:'2-digit',day:'2-digit'}).replace(/\//g,'.'),
    emoji: emojiMap[category] || 'ğŸ“',
    featured: false, author: currentUser.name, comments: []
  };
  dummyArticles.unshift(newArticle);
  renderArticles();
  closeModal('articleModal');
  showToast('ğŸ‰ è¨˜äº‹ã‚’æŠ•ç¨¿ã—ã¾ã—ãŸï¼', 'success');
  document.getElementById('articleTitle').value = '';
  document.getElementById('articleCategory').value = '';
  document.getElementById('articleBody').value = '';
  document.getElementById('articleTags').value = '';
  document.getElementById('articleImagePreview').innerHTML = '';
}

// ===================== POST (SUPABASE) =====================
let selectedRating = 0;

function setRating(n) {
  selectedRating = n;
  document.querySelectorAll('#starRating span').forEach((s,i) => {
    s.classList.toggle('active', i < n);
  });
}

function previewImages(input) {
  const preview = document.getElementById('imagePreview');
  preview.innerHTML = '';
  Array.from(input.files).forEach(f => {
    const reader = new FileReader();
    reader.onload = e => {
      const img = document.createElement('img');
      img.src = e.target.result;
      preview.appendChild(img);
    };
    reader.readAsDataURL(f);
  });
}

async function handlePost() {
  if (!currentUser) { showToast('âš ï¸ ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™', 'error'); return; }
  const product = document.getElementById('postProduct').value.trim();
  const brand = document.getElementById('postBrand').value.trim();
  const text = document.getElementById('postText').value.trim();
  if (!product || !brand || !text) { showToast('âš ï¸ å•†å“åãƒ»ãƒ–ãƒ©ãƒ³ãƒ‰åãƒ»æœ¬æ–‡ã¯å¿…é ˆã§ã™', 'error'); return; }
  if (selectedRating === 0) { showToast('âš ï¸ è©•ä¾¡ã‚’é¸æŠã—ã¦ãã ã•ã„', 'error'); return; }
  showToast('â³ æŠ•ç¨¿ä¸­...', 'success');
  let productId;
  const { data: existingProduct } = await sb.from('products').select('id').ilike('name', product).eq('brand', brand).maybeSingle();
  if (existingProduct) {
    productId = existingProduct.id;
  } else {
    const { data: newProduct, error: pErr } = await sb.from('products').insert({ name: product, brand, category: 'æœªåˆ†é¡', emoji: 'âœ¨', tags: [] }).select('id').single();
    if (pErr) { showToast('âš ï¸ å•†å“ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸ', 'error'); return; }
    productId = newProduct.id;
  }
  const { error } = await sb.from('reviews').insert({ product_id: productId, user_id: currentUser.id, rating: selectedRating, text });
  if (error) { showToast('âš ï¸ æŠ•ç¨¿ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message, 'error'); return; }
  const newReview = {
    id: Date.now(), product, brand, rating: selectedRating, text,
    author: currentUser.name,
    date: new Date().toLocaleDateString('ja-JP',{year:'numeric',month:'2-digit',day:'2-digit'}).replace(/\//g,'.'),
    emoji: 'âœ¨', tags: []
  };
  allReviews.unshift(newReview);
  renderReviews(allReviews.slice(0, 3));
  closeModal('postModal');
  showToast('ğŸ‰ ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æŠ•ç¨¿ã—ã¾ã—ãŸï¼', 'success');
  document.getElementById('postProduct').value = '';
  document.getElementById('postBrand').value = '';
  document.getElementById('postText').value = '';
  document.getElementById('imagePreview').innerHTML = '';
  selectedRating = 0;
  document.querySelectorAll('#starRating span').forEach(s => s.classList.remove('active'));
}

// ===================== COMMENTS (SUPABASE) =====================
async function postArticleComment() {
  if (!currentUser) { showToast('âš ï¸ ã‚³ãƒ¡ãƒ³ãƒˆã«ã¯ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™', 'error'); return; }
  const text = document.getElementById('adCommentInput').value.trim();
  if (!text) { showToast('âš ï¸ ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error'); return; }
  const articleId = parseInt(document.getElementById('articleDetailModal').dataset.articleId);
  if (articleId < 1000000000000) {
    const { error } = await sb.from('comments').insert({ article_id: articleId, user_id: currentUser.id, text });
    if (error) console.warn('ã‚³ãƒ¡ãƒ³ãƒˆä¿å­˜ã‚¨ãƒ©ãƒ¼:', error.message);
  }
  const article = dummyArticles.find(a => a.id === articleId);
  if (!article) return;
  if (!article.comments) article.comments = [];
  article.comments.push({
    author: currentUser.name, text,
    date: new Date().toLocaleDateString('ja-JP',{year:'numeric',month:'2-digit',day:'2-digit'}).replace(/\//g,'.')
  });
  renderArticleComments(article.comments, articleId);
  document.getElementById('adCommentInput').value = '';
  showToast('ğŸ’¬ ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ã—ã¾ã—ãŸï¼', 'success');
}

// ===================== LOAD FROM SUPABASE =====================
async function loadReviewsFromDB() {
  try {
    const { data, error } = await sb
      .from('reviews')
      .select('id, rating, text, created_at, products(name, brand, emoji), profiles(name)')
      .order('created_at', { ascending: false })
      .limit(6);
    if (error || !data?.length) return;
    const loaded = data.map(r => ({
      id: r.id,
      product: r.products?.name || 'ä¸æ˜',
      brand: r.products?.brand || '',
      rating: r.rating, text: r.text,
      author: r.profiles?.name || 'ãƒ¦ãƒ¼ã‚¶ãƒ¼',
      date: new Date(r.created_at).toLocaleDateString('ja-JP',{year:'numeric',month:'2-digit',day:'2-digit'}).replace(/\//g,'.'),
      emoji: r.products?.emoji || 'âœ¨', tags: []
    }));
    allReviews = [...loaded, ...allReviews.filter(r => r.id > 1000)];
    renderReviews(allReviews.slice(0, 3));
  } catch(e) { console.warn('ãƒ¬ãƒ“ãƒ¥ãƒ¼èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', e); }
}

async function loadArticlesFromDB() {
  try {
    const { data, error } = await sb
      .from('articles')
      .select('id, title, tag, body, emoji, created_at, profiles(name)')
      .order('created_at', { ascending: false })
      .limit(10);
    if (error || !data?.length) return;
    const loaded = data.map(a => ({
      id: a.id, title: a.title, tag: a.tag, body: a.body,
      emoji: a.emoji || 'ğŸ“',
      date: new Date(a.created_at).toLocaleDateString('ja-JP',{year:'numeric',month:'2-digit',day:'2-digit'}).replace(/\//g,'.'),
      featured: false,
      author: a.profiles?.name || 'ãƒ¦ãƒ¼ã‚¶ãƒ¼',
      readTime: Math.max(1, Math.ceil((a.body?.length || 0) / 400)),
      comments: []
    }));
    loaded.forEach(a => { if (!dummyArticles.find(d => d.id === a.id)) dummyArticles.unshift(a); });
    renderArticles();
  } catch(e) { console.warn('è¨˜äº‹èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', e); }
}

// ===================== MODAL UTILS =====================
function openModal(id) {
  document.getElementById(id).classList.add('show');
}
function closeModal(id) {
  document.getElementById(id).classList.remove('show');
}
function switchModal(fromId, toId) {
  closeModal(fromId);
  setTimeout(() => openModal(toId), 150);
}

// Close on overlay click
document.querySelectorAll('.modal-overlay').forEach(overlay => {
  overlay.addEventListener('click', e => {
    if (e.target === overlay) overlay.classList.remove('show');
  });
});

// ===================== TOAST =====================
function showToast(msg, type='success') {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.className = 'toast ' + type;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 3500);
}

// ===================== SCROLL ANIM =====================
function observeAll() {
  const observer = new IntersectionObserver(entries => {
    entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('visible'); });
  }, { threshold: 0.08 });
  document.querySelectorAll('.fade-in:not(.visible)').forEach(el => observer.observe(el));
}

// ===================== INIT =====================
renderReviews(allReviews.slice(0,3));
renderProducts(dummyProducts);
renderArticles();
renderFaq();
observeAll();

// Supabaseã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’éåŒæœŸãƒ­ãƒ¼ãƒ‰ï¼ˆå¤±æ•—ã—ã¦ã‚‚ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ã§è¡¨ç¤ºç¶™ç¶šï¼‰
loadReviewsFromDB();
loadArticlesFromDB();
</script>
</body>
</html>
